(()=>{"use strict";class e{static turn="player";static players=[];static boards=[];static mode="PvP";static wasHit=!1;static cpuAttacked=[];static gameOver=!1;static justSunk="";static sunkEventFlag=!1;static selectedAttack="attack";static sniperInvalidFlag=!1}class t{static cpuLastHit=[];static cpuTargetingAid=[];static attempts=0}class s{static axis="x";static currentShip=[];static currentShipIndex=0;static currentPlacementBoard="player"}class n{static volume=1;static song="assets/sfx/we-are-8-bit.mp3";static currentlyPlaying={}}const a=class{constructor(e="Computer"){this.name=e}attackCharges=0;previousHit=[];attack(e,t){let s=[parseInt(e[0]),parseInt(e[1])];if(0===t.recordAttack.length)return t.receiveAttack(s),!0;for(let e=0;e<t.recordAttack.length;e++)return(s[0]!=t.recordAttack[e][0]||s[1]!=t.recordAttack[e][1])&&(t.receiveAttack(s),!0)}_cpuAttack(e){let t=Math.floor(10*Math.random()),s=Math.floor(10*Math.random());if(!this._onAvailableSpace([t,s],e))return this._cpuAttack(e);this.attack([t,s],e)}_defineAxis(){return 1===Math.floor(2*Math.random())?"x":"y"}_cpuSmartMove(e){const s=[[...t.cpuLastHit][0][0],[...t.cpuLastHit][0][1]];let n=[],a=s[0],c=s[1];return 0===t.attempts&&(a++,n.push(a),n.push(c)),1===t.attempts&&(c++,n.push(a),n.push(c)),2===t.attempts&&(c--,n.push(a),n.push(c)),3===t.attempts&&(a--,n.push(a),n.push(c)),-1===n[0]||-1===n[1]||10===n[0]||10===n[1]||!this._onAvailableSpace(n,e)&&t.attempts<4?(t.attempts++,this._cpuSmartMove(e)):this._onAvailableSpace(n,e)&&t.attempts<4?(t.attempts=0,this.attack(n,e)):(t.attempts=0,void this._cpuAttack(e))}_onAvailableSpace(e,t){for(let s=0;s<t.recordAttack.length;s++)if(e[0]===t.recordAttack[s][0]&&e[1]===t.recordAttack[s][1])return!1;return!0}cpuAttackPattern(e){0===t.cpuLastHit.length?this._cpuAttack(e):this._cpuSmartMove(e)}_inBounds(e){return!(e[0]>9||e[1]>9||e[0]<0||e[1]<0)}radarAttack(e,t){this.attack(e,t);let s=0,n=[],a=[parseInt(e[0]),parseInt(e[1])];const c=[[a[0]-1,a[1]-1],[a[0]-1,a[1]],[a[0]-1,a[1]+1],[a[0],a[1]+1],[a[0]+1,a[1]+1],[a[0]+1,a[1]],[a[0]+1,a[1]-1],[a[0],a[1]-1]];for(let e=0;e<c.length;e++)c[e][0]<10&&c[e][1]<10&&c[e][0]>=0&&c[e][1]>=0&&n.push(c[e]);for(let e=0;e<n.length;e++)for(let a=0;a<t.shipCoordinates.length;a++)for(let c=0;c<t.shipCoordinates[a].location.length;c++)n[e][0]===t.shipCoordinates[a].location[c][0]&&n[e][1]===t.shipCoordinates[a].location[c][1]&&s++;return s}sniperAttack(t){if(0===t.recordAttack.length)return this.attack([t.shipCoordinates[0].location[0][0],t.shipCoordinates[0].location[0][1]],t);for(let s=0;s<t.shipCoordinates.length;s++)for(let n=0;n<t.shipCoordinates[s].location.length;n++){for(let a=0;a<t.recordAttack.length;a++)t.shipCoordinates[s].location[n][0]===t.recordAttack[a][0]&&t.shipCoordinates[s].location[n][1]===t.recordAttack[a][1]&&(e.sniperInvalidFlag=!0);if(!e.sniperInvalidFlag)return this.attack([t.shipCoordinates[s].location[n][0],t.shipCoordinates[s].location[n][1]],t),[t.shipCoordinates[s].location[n][0],t.shipCoordinates[s].location[n][1]];e.sniperInvalidFlag=!1}}bombAttack(e,t){let s=[parseInt(e[0]),parseInt(e[1])];const n=[s,[s[0],s[1]+1],[s[0]+1,s[1]+1],[s[0]+1,s[1]]];let a=[];for(let e=0;e<n.length;e++)this._onAvailableSpace(n[e],t)&&this._inBounds(n[e])&&a.push(n[e]);return a}strikeAttack(e,t,s){let n=[],a=[],c=[],l=[],r=[parseInt(e[0]),parseInt(e[1])],o=r,i=r;if(c.push(r),"x"===t){for(let e=0;e<s.size;e++)this._inBounds([o[0]+1,o[1]])?(o=[o[0]+1,o[1]],a.push(o)):this._inBounds([i[0]-1,i[1]])&&(i=[i[0]-1,i[1]],a.push(i));for(let e=0;e<a.length;e++)this._onAvailableSpace(a[e],s)&&c.push(a[e]);return c}if("y"===t){for(let e=0;e<s.size;e++)this._inBounds([o[0],o[1]+1])?(o=[o[0],o[1]+1],n.push(o)):this._inBounds([i[0],i[1]-1])&&(i=[i[0],i[1]-1],n.push(i));for(let e=0;e<n.length;e++)this._onAvailableSpace(n[e],s)&&l.push(n[e]);return l}}};function c(){const e=new Audio("assets/sfx/hit.wav");return e.volume=n.volume,e}function l(){const e=new Audio("assets/sfx/miss.mp3");return e.volume=n.volume,e}const r=class{constructor(e,t=null){this.name=t,this.length=e,this.hitCoordinates=[]}getHitCoordinates(){return this.hitCoordinates}hit(e){this.hitCoordinates.push(e)}isSunk(){return this.length===this.hitCoordinates.length}},o=class{constructor(e,t=10){this.name=e,this.size=t}shipCoordinates=[];recordAttack=[];sunkShips=[];receiveAttack(s){let n="miss";this.recordAttack.push(s),"computer"===e.turn&&e.cpuAttacked.push(s);for(let a=0;a<this.shipCoordinates.length;a++)for(let c=0;c<this.shipCoordinates[a].location.length;c++)if(s[0]===this.shipCoordinates[a].location[c][0]&&s[1]===this.shipCoordinates[a].location[c][1])return"bomb"!==e.selectedAttack&&"strike"!==e.selectedAttack||(n="hit"),this.shipCoordinates[a].object.hit(s),e.wasHit=!0,"computer"===e.turn&&(t.cpuLastHit.push(s),2===t.cpuLastHit.length&&t.cpuLastHit.shift()),this.shipCoordinates[a].object.isSunk()&&(this.sunkShips.push(this.shipCoordinates[a].object),e.justSunk=this.shipCoordinates[a].object.name,e.sunkEventFlag=!0,"computer"===e.turn&&(t.cpuLastHit=[])),"bomb"!==e.selectedAttack&&"strike"!==e.selectedAttack||v(s,n),!0;return"bomb"!==e.selectedAttack&&"strike"!==e.selectedAttack||v(s,n),!1}removeShip(){return this.shipCoordinates.pop()}addShip(e,t){this.shipCoordinates.push({object:e,location:t})}randomAddShips(){let e=new r(5,"Carrier"),t=new r(4,"Battleship"),s=new r(2,"Destroyer"),n=new r(3,"Cruiser"),a=new r(3,"Submarine");this._randomizeShips(e),this._randomizeShips(t),this._randomizeShips(n),this._randomizeShips(s),this._randomizeShips(a)}_isEmptySpace(e){for(let t=0;t<e.length;t++)for(let s=0;s<this.shipCoordinates.length;s++)for(let n=0;n<this.shipCoordinates[s].location.length;n++)if(e[t][0]===this.shipCoordinates[s].location[n][0]&&e[t][1]===this.shipCoordinates[s].location[n][1])return!1;return!0}_randomizeShips(e,t=10){let s=[];const n=e.length;let a=this._defineAxis(),c=Math.floor(10*Math.random()),l=Math.floor(10*Math.random());if(s.push([c,l]),"x"===a&&c+n<=t)for(let e=0;e<n-1;e++)c++,s.push([c,l]);else if("x"===a&&c+n>t)for(let e=0;e<n-1;e++)c--,s.push([c,l]);if("y"===a&&l+n<=t)for(let e=0;e<n-1;e++)l++,s.push([c,l]);else if("y"===a&&l+n>t)for(let e=0;e<n-1;e++)l--,s.push([c,l]);if(!this._isEmptySpace(s))return this._randomizeShips(e,t);this.addShip(e,s)}_defineAxis(){return 1===Math.floor(2*Math.random())?"x":"y"}getSunkShips(){return this.sunkShips}allShipsSunk(){return 5===this.sunkShips.length}};function i(e){"Space"===e.code&&("x"===s.axis?s.axis="y":"y"===s.axis&&(s.axis="x"))}function d(){const t=document.getElementById("current-player-board"),s=document.getElementById("current-opponent-board"),n=document.getElementById("turn"),a=document.getElementById("player-energy"),l=[...e.players][0],r=[...e.boards][1],o=[...e.players][1],i=[...e.boards][0],d=document.getElementById("opponent-energy");let m="Hit!";const u=c();if("player"===e.turn){for(let e=0;e<s.children.length;e++)"DIV"===s.children[e].tagName&&s.children[e].classList.add("revoke-events");s.addEventListener("click",(()=>{l.attackCharges-=7,a.textContent=`Energy: ${l.attackCharges}`;const t=l.sniperAttack(r);let c="b"+t[0]+","+t[1];const o=document.getElementById(`${c}`);u.play(),o.classList.add("hit"),o.classList.add("permanently-revoke-events"),!0===e.sunkEventFlag&&(m=`You sunk the ${e.justSunk}!`,e.sunkEventFlag=!1),e.wasHit=!1;for(let e=0;e<s.children.length;e++)"DIV"===s.children[e].tagName&&s.children[e].classList.remove("revoke-events");r.allShipsSunk()&&(e.gameOver=!0,x()),e.selectedAttack="attack","PvP"===e.mode?e.turn="opponent":"PvC"===e.mode&&(e.turn="computer",h()),n.textContent=`${m} It's ${g()}'s Turn!`}),{once:!0})}else if("opponent"===e.turn){for(let e=0;e<t.children.length;e++)"DIV"===t.children[e].tagName&&t.children[e].classList.add("revoke-events");t.addEventListener("click",(()=>{o.attackCharges-=7,d.textContent=`Energy: ${o.attackCharges}`;const s=o.sniperAttack(i);let a="a"+s[0]+","+s[1];const c=document.getElementById(`${a}`);u.play(),c.classList.add("hit"),c.classList.add("permanently-revoke-events"),!0===e.sunkEventFlag&&(m=`You sunk the ${e.justSunk}!`,e.sunkEventFlag=!1),e.wasHit=!1;for(let e=0;e<t.children.length;e++)"DIV"===t.children[e].tagName&&t.children[e].classList.remove("revoke-events");i.allShipsSunk()&&(e.gameOver=!0,x()),e.selectedAttack="attack",e.turn="player";const l=document.getElementById("sniper-attack"),r=document.getElementById("sniper-attack-opponent");l.classList.remove("selected"),r.classList.remove("selected"),n.textContent=`${m} It's ${g()}'s Turn!`}),{once:!0})}}function m(e){const t=u(e),s=document.getElementById("current-opponent-board");for(let n=0;n<e*e;n++){const e=document.createElement("div");e.className="opponent-grid-elements",e.id=`b${t.next().value}`,p(e),s.appendChild(e)}}function*u(e){let t=[0,0];for(;t[0]<=e-1&&t[1]<=e-1;)0===t[0]&&0===t[1]&&(yield t),t[1]++,t[1]===e&&(t[0]++,t[1]=0),yield t}function p(t){t.addEventListener("click",(()=>{let n="";const a=c(),r=l(),o=document.getElementById("turn"),d=document.getElementById("player-energy");if("player"!==e.turn)return void p(t);const m=[...e.players][0],u=[...e.boards][1],y=t.id.slice(1).split(",");if("attack"===e.selectedAttack)m.attack(y,u),m.attackCharges++,d.textContent=`Energy: ${m.attackCharges}`;else if("radar"===e.selectedAttack){m.attackCharges-=4,d.textContent=`Energy: ${m.attackCharges}`;let s=m.radarAttack(y,u);t.textContent=`${s}`,t.style.textAlign="center",t.style.padding=".5rem",t.style.fontSize="1.75rem",e.selectedAttack="attack"}else if("bomb"===e.selectedAttack){m.attackCharges-=5,d.textContent=`Energy: ${m.attackCharges}`;const t=m.bombAttack(y,u);for(let e=0;e<t.length;e++){m.attack(t[e],u);let s="b"+t[e][0]+","+t[e][1];document.getElementById(`${s}`).classList.add("permanently-revoke-events")}e.selectedAttack="attack"}else if("strike"===e.selectedAttack){m.attackCharges-=14,d.textContent=`Energy: ${m.attackCharges}`;const t=m.strikeAttack(y,s.axis,u);for(let e=0;e<t.length;e++){m.attack(t[e],u);let s="b"+t[e][0]+","+t[e][1];document.getElementById(`${s}`).classList.add("permanently-revoke-events")}document.removeEventListener("keyup",i),e.selectedAttack="attack",s.axis="x"}if(u.allShipsSunk()&&(e.gameOver=!0,x()),!0===e.wasHit?(a.play(),t.classList.add("hit"),n="Its a hit!",!0===e.sunkEventFlag&&(n=`You sunk the ${e.justSunk}!`,e.sunkEventFlag=!1),e.wasHit=!1):(r.play(),n="Miss...",t.classList.add("miss")),"PvP"===e.mode){e.turn="opponent";const t=document.getElementById("radar-attack"),s=document.getElementById("radar-attack-opponent"),a=document.getElementById("strike-attack"),c=document.getElementById("strike-attack-opponent"),l=document.getElementById("sniper-attack"),r=document.getElementById("sniper-attack-opponent"),i=document.getElementById("bomb-attack"),d=document.getElementById("bomb-attack-opponent");s.classList.remove("selected"),t.classList.remove("selected"),a.classList.remove("selected"),c.classList.remove("selected"),i.classList.remove("selected"),d.classList.remove("selected"),l.classList.remove("selected"),r.classList.remove("selected"),o.textContent=`${n} It's ${g()}'s Turn!`}else"PvC"===e.mode&&(e.turn="computer",o.textContent=`${n} It's ${g()}'s Turn!`,h())}),{once:!0})}async function h(){let t="";const s=document.getElementById("turn");await function(){const e=1500*Math.random();return new Promise((t=>setTimeout(t,e)))}();const n=c(),a=l(),r=[...e.players][1],o=[...e.boards][0];r.cpuAttackPattern(o);let i=[...e.cpuAttacked][0][0]+","+[...e.cpuAttacked][0][1];e.cpuAttacked=[];const d=document.getElementById(`a${i}`);o.allShipsSunk()&&(e.gameOver=!0,x()),!0===e.wasHit?(n.play(),d.classList.remove("reveal"),d.classList.add("hit"),t="Its a hit!",!0===e.sunkEventFlag&&(t=`Computer sunk the ${e.justSunk}!`,e.sunkEventFlag=!1),e.wasHit=!1):(a.play(),t="Miss...",d.classList.add("miss")),e.turn="player",s.textContent=`${t} It's ${g()}'s Turn!`}function y(t){t.addEventListener("click",(()=>{const n=c(),a=l();let r="";const o=document.getElementById("turn"),d=document.getElementById("opponent-energy");if("player"===e.turn)return void y(t);const m=[...e.players][1],u=[...e.boards][0],p=t.id.slice(1).split(",");if("PvP"===e.mode){if("attack"===e.selectedAttack)m.attack(p,u),m.attackCharges++,d.textContent=`Energy: ${m.attackCharges}`;else if("radar"===e.selectedAttack){m.attackCharges-=4,d.textContent=`Energy: ${m.attackCharges}`;let s=m.radarAttack(p,u);t.textContent=`${s}`,t.style.textAlign="center",t.style.padding=".5rem",t.style.fontSize="1.75rem",e.selectedAttack="attack"}else if("bomb"===e.selectedAttack){m.attackCharges-=5,d.textContent=`Energy: ${m.attackCharges}`;const t=m.bombAttack(p,u);for(let e=0;e<t.length;e++){m.attack(t[e],u);let s="a"+t[e][0]+","+t[e][1];document.getElementById(`${s}`).classList.add("permanently-revoke-events")}e.selectedAttack="attack"}else if("strike"===e.selectedAttack){m.attackCharges-=14,d.textContent=`Energy: ${m.attackCharges}`;const t=m.strikeAttack(p,s.axis,u);for(let e=0;e<t.length;e++){m.attack(t[e],u);let s="a"+t[e][0]+","+t[e][1];document.getElementById(`${s}`).classList.add("permanently-revoke-events")}document.removeEventListener("keyup",i),e.selectedAttack="attack",s.axis="x"}!0===e.wasHit?(n.play(),t.classList.add("hit"),r="Its a hit!",!0===e.sunkEventFlag&&(r=`You sunk the ${e.justSunk}!`,e.sunkEventFlag=!1),e.wasHit=!1):(a.play(),t.classList.add("miss"),r="Miss...")}u.allShipsSunk()&&(e.gameOver=!0,x()),e.turn="player";const h=document.getElementById("radar-attack"),v=document.getElementById("radar-attack-opponent"),k=document.getElementById("strike-attack"),f=document.getElementById("strike-attack-opponent"),E=document.getElementById("sniper-attack"),I=document.getElementById("sniper-attack-opponent"),L=document.getElementById("bomb-attack"),B=document.getElementById("bomb-attack-opponent");v.classList.remove("selected"),h.classList.remove("selected"),k.classList.remove("selected"),f.classList.remove("selected"),L.classList.remove("selected"),B.classList.remove("selected"),E.classList.remove("selected"),I.classList.remove("selected"),o.textContent=`${r} It's ${g()}'s Turn!`}),{once:!0})}function g(){const t=[...e.boards][0],s=[...e.boards][1];switch(e.turn){case"player":return""===t.name?"Player 1":t.name;case"opponent":return""===s.name?"Player 2":s.name;case"computer":return"Computer"}}function v(t,s){if("player"===e.turn&&"hit"===s){let e="b"+t[0]+","+t[1];document.getElementById(`${e}`).classList.add("hit")}else if("player"===e.turn&&"miss"===s){let e="b"+t[0]+","+t[1];document.getElementById(`${e}`).classList.add("miss")}if("opponent"===e.turn&&"hit"===s){let e="a"+t[0]+","+t[1];document.getElementById(`${e}`).classList.add("hit")}else if("opponent"===e.turn&&"miss"===s){let e="a"+t[0]+","+t[1];document.getElementById(`${e}`).classList.add("miss")}}function k(t){t.addEventListener("dragover",(e=>{e.preventDefault();let n=t.id;if(n=n.split(","),"x"===s.axis)for(let e=0;e<s.currentShip[s.currentShipIndex].shipObj.length;e++){let t=n[0]+","+(parseInt(n[1])+e);document.getElementById(`${t}`)}})),t.addEventListener("dragleave",(e=>{let n=t.id;if(n=n.split(","),"x"===s.axis)for(let e=0;e<s.currentShip[s.currentShipIndex].shipObj.length;e++){let t=n[0]+","+(parseInt(n[1])+e);document.getElementById(`${t}`)}})),t.addEventListener("drop",(n=>{n.preventDefault();let a=t.id;a=a.split(",");let c=[];if("x"===s.axis&&parseInt(a[1])+s.currentShip[s.currentShipIndex].shipObj.length-1>9||"y"===s.axis&&parseInt(a[0])+s.currentShip[s.currentShipIndex].shipObj.length-1>9)return!1;if("x"===s.axis)for(let e=0;e<s.currentShip[s.currentShipIndex].shipObj.length;e++)c.push([parseInt(a[0]),parseInt(a[1])+e]);if("y"===s.axis)for(let e=0;e<s.currentShip[s.currentShipIndex].shipObj.length;e++)c.push([parseInt(a[0])+e,parseInt(a[1])]);if(!function(t){let n;n="player"===s.currentPlacementBoard?[...e.boards][0]:[...e.boards][1];for(let e=0;e<t.length;e++)for(let s=0;s<n.shipCoordinates.length;s++)for(let a=0;a<n.shipCoordinates[s].location.length;a++)if(t[e][0]===n.shipCoordinates[s].location[a][0]&&t[e][1]===n.shipCoordinates[s].location[a][1])return!1;return!0}(c))return!1;const l=n.dataTransfer.getData("text"),r=document.getElementById(l);var o;n.target.appendChild(r),r.setAttribute("draggable",!1),o=c,"player"===s.currentPlacementBoard?[...e.boards][0].addShip([...s.currentShip][s.currentShipIndex].shipObj,o):"opponent"===s.currentPlacementBoard&&[...e.boards][1].addShip([...s.currentShip][s.currentShipIndex].shipObj,o),E(),f(),s.currentShipIndex<5&&I()}))}function f(){if(s.currentShipIndex++,s.currentShipIndex>=5){const t=document.getElementById("game"),n=document.getElementById("placement-page-body-container");if("PvC"===e.mode)[...e.boards][1].randomAddShips();else if("PvP"===e.mode&&"player"===s.currentPlacementBoard)return function(){E(),s.currentShip=[],s.currentShipIndex=0,s.currentPlacementBoard="opponent";const e=document.getElementById("placement-board");for(;e.firstChild;)e.removeChild(e.lastChild);const t=document.getElementById("unplaced-ship-container");for(;t.firstChild;)t.lastChild.className="",t.removeChild(t.lastChild)}(),L();n.style.display="none",t.style.display="flex",function(t=10){!async function(){const e=await fetch("https://api.giphy.com/v1/gifs/o0eOCNkn7cSD6?api_key=XQjjxBQQYTlh7yBaVu1JXQ6YbH5dno3B&s=cats",{mode:"cors"}),t=await e.json();document.getElementById("gg-img").src=t.data.images.original.url}();const s=document.getElementById("game");document.body.style.backgroundImage="none",async function(){const e=await fetch("https://api.giphy.com/v1/gifs/XPlcxsFs8BIKk?api_key=XQjjxBQQYTlh7yBaVu1JXQ6YbH5dno3B&s=cats",{mode:"cors"}),t=await e.json();document.body.style.backgroundImage=`url(${t.data.images.original.url})`}();const n=document.getElementById("placement-page-body-container");!function(){const t=[...e.boards][0],s=[...e.boards][1],n=document.getElementById("player-name"),a=document.getElementById("player-2-name");""===t.name?n.textContent="Player 1":n.textContent=`${t.name}`,""===s.name?a.textContent="Player 2":a.textContent=`${s.name}`}(),function(e){const t=u(e),s=document.getElementById("current-player-board");for(let n=0;n<e*e;n++){const e=document.createElement("div");e.className="player-grid-elements",e.id=`a${t.next().value}`,y(e),s.appendChild(e)}}(t),"PvP"===e.mode?m(t):"PvC"===e.mode&&(function(){let t="";const s=[...e.boards][0];e.boards;for(let e=0;e<s.shipCoordinates.length;e++)for(let n=0;n<s.shipCoordinates[e].location.length;n++)t=s.shipCoordinates[e].location[n][0]+","+s.shipCoordinates[e].location[n][1],document.getElementById(`a${t}`).classList.add("reveal")}(),m(t)),function(){const t=document.getElementById("radar-attack"),s=document.getElementById("radar-attack-opponent"),n=document.getElementById("strike-attack"),a=document.getElementById("strike-attack-opponent"),c=document.getElementById("sniper-attack"),l=document.getElementById("sniper-attack-opponent"),r=document.getElementById("bomb-attack"),o=document.getElementById("bomb-attack-opponent");s.addEventListener("click",(()=>{"opponent"===e.turn&&([...e.players][1].attackCharges>=4?(e.selectedAttack="radar",s.classList.add("selected"),t.classList.remove("selected"),n.classList.remove("selected"),a.classList.remove("selected"),r.classList.remove("selected"),o.classList.remove("selected"),c.classList.remove("selected"),l.classList.remove("selected")):document.getElementById("turn").textContent="You dont have enough energy!")})),t.addEventListener("click",(()=>{"player"===e.turn&&([...e.players][0].attackCharges>=4?(e.selectedAttack="radar",s.classList.remove("selected"),t.classList.add("selected"),n.classList.remove("selected"),a.classList.remove("selected"),r.classList.remove("selected"),o.classList.remove("selected"),c.classList.remove("selected"),l.classList.remove("selected")):document.getElementById("turn").textContent="You dont have enough energy!")})),c.addEventListener("click",(()=>{"player"===e.turn&&([...e.players][0].attackCharges>=7?(e.selectedAttack="sniper",s.classList.remove("selected"),t.classList.remove("selected"),n.classList.remove("selected"),a.classList.remove("selected"),r.classList.remove("selected"),o.classList.remove("selected"),c.classList.add("selected"),l.classList.remove("selected"),d()):document.getElementById("turn").textContent="You dont have enough energy!")})),l.addEventListener("click",(()=>{"opponent"===e.turn&&([...e.players][1].attackCharges>=7?(e.selectedAttack="sniper",s.classList.remove("selected"),t.classList.remove("selected"),n.classList.remove("selected"),a.classList.remove("selected"),r.classList.remove("selected"),o.classList.remove("selected"),c.classList.remove("selected"),l.classList.add("selected"),d()):document.getElementById("turn").textContent="You dont have enough energy!")})),r.addEventListener("click",(()=>{"player"===e.turn&&([...e.players][0].attackCharges>=5?(e.selectedAttack="bomb",s.classList.remove("selected"),t.classList.remove("selected"),n.classList.remove("selected"),a.classList.remove("selected"),r.classList.add("selected"),o.classList.remove("selected"),c.classList.remove("selected"),l.classList.remove("selected")):document.getElementById("turn").textContent="You dont have enough energy!")})),o.addEventListener("click",(()=>{"opponent"===e.turn&&([...e.players][1].attackCharges>=5?(e.selectedAttack="bomb",s.classList.remove("selected"),t.classList.remove("selected"),n.classList.remove("selected"),a.classList.remove("selected"),r.classList.remove("selected"),o.classList.add("selected"),c.classList.remove("selected"),l.classList.remove("selected")):document.getElementById("turn").textContent="You dont have enough energy!")})),n.addEventListener("click",(()=>{"player"===e.turn&&([...e.players][0].attackCharges>=14?(e.selectedAttack="strike",s.classList.remove("selected"),t.classList.remove("selected"),n.classList.add("selected"),a.classList.remove("selected"),r.classList.remove("selected"),o.classList.remove("selected"),c.classList.remove("selected"),l.classList.remove("selected"),document.addEventListener("keyup",i)):document.getElementById("turn").textContent="You dont have enough energy!")})),a.addEventListener("click",(()=>{"opponent"===e.turn&&([...e.players][1].attackCharges>=14?(e.selectedAttack="strike",s.classList.remove("selected"),t.classList.remove("selected"),n.classList.remove("selected"),a.classList.add("selected"),r.classList.remove("selected"),o.classList.remove("selected"),c.classList.remove("selected"),l.classList.remove("selected"),document.addEventListener("keyup",i)):document.getElementById("turn").textContent="You dont have enough energy!")}))}(),n.style.display="none",s.style.display="flex",document.getElementById("turn").textContent=`${g()} start your offensive!`}()}}function E(){s.axis="x",document.getElementById("unplaced-ship-container").style.height="fit-content"}function I(){const e=document.createElement("img");e.className="ship-img";const t=document.getElementById("ship-name"),n=document.getElementById("ship-length");document.getElementById("unplaced-ship-container").appendChild(e),function(){let e;s.currentPlacementBoard,e=document.getElementsByClassName("ship-img")[s.currentShipIndex],e.addEventListener("dragstart",(e=>{e.dataTransfer.clearData(),e.dataTransfer.setData("text/plain",e.target.id)}))}(),e.id=`${[...s.currentShip][s.currentShipIndex].shipObj.name}`,e.src=`${[...s.currentShip][s.currentShipIndex].shipSrcImg}`,t.textContent=`Name: ${[...s.currentShip][s.currentShipIndex].shipObj.name}`,n.textContent=`Length: ${[...s.currentShip][s.currentShipIndex].shipObj.length}`,e.setAttribute("draggable",!0)}function L(){document.getElementById("randomize-button").addEventListener("click",B);const t=document.getElementById("placement-board-name");let n=[...e.players][1].name;""===n&&(n="Player 2"),t.textContent=`${n}'s board`,document.getElementById("placement-page-body-container").display="flex",function(e=10){const t=u(e),s=document.getElementById("placement-board");for(let n=0;n<e*e;n++){const e=document.createElement("div");e.id=`${t.next().value}`,k(e),s.appendChild(e)}}(),function(){let e=[{shipObj:new r(5,"carrier"),shipSrcImg:"assets/ships/carrier.png"},{shipObj:new r(4,"battleship"),shipSrcImg:"assets/ships/battleship.png"},{shipObj:new r(2,"destroyer"),shipSrcImg:"assets/ships/gamsi.png"},{shipObj:new r(3,"cruiser"),shipSrcImg:"assets/ships/frigate.png"},{shipObj:new r(3,"submarine"),shipSrcImg:"assets/ships/submarine.png"}];s.currentShip=e}(),"player"===s.currentPlacementBoard&&(n=[...e.players][0].name,""===n&&(n="Player 1"),t.textContent=`${n}'s board`,I(),function(){const e=document.getElementById("unplaced-ship-container"),t=6*[...s.currentShip][s.currentShipIndex].shipObj.length;document.getElementById("change-orientation").addEventListener("click",(()=>{let n=document.getElementsByClassName("ship-img");"x"===s.axis?(s.axis="y",n[s.currentShipIndex].classList.add("y"),e.style.height=`${t}vh`):(s.axis="x",n[s.currentShipIndex].classList.remove("y"),e.style.height="fit-content")}))}())}function B(){"player"===s.currentPlacementBoard?(document.getElementById("randomize-button").removeEventListener("click",B),[...e.boards][0].randomAddShips(),s.currentShipIndex=5,f(),"PvP"===e.mode&&I()):"opponent"===s.currentPlacementBoard&&([...e.boards][1].randomAddShips(),s.currentShipIndex=5,f())}function b(){L()}function x(){const t=document.getElementById("current-opponent-board"),s=document.getElementById("current-player-board");for(let e=0;e<t.children.length;e++)"DIV"===t.children[e].tagName&&t.children[e].classList.add("revoke-events");for(let e=0;e<s.children.length;e++)"DIV"===s.children[e].tagName&&s.children[e].classList.add("revoke-events");!function(){const t=document.getElementById("current-opponent-board");document.getElementById("current-player-board").classList.add("game-over"),t.classList.add("game-over");const s=document.getElementById("game-over-modal"),n=document.getElementById("winner-name"),a=document.getElementById("num-remaining"),c=document.getElementsByClassName("replay-btn")[0];let l,r=0;[...e.boards][0].allShipsSunk()?(l=[...e.players][1].name,""===[...e.players][1].name&&(l="Player 2"),r=5-[...e.boards][1].sunkShips.length):(l=[...e.players][0].name,""===[...e.players][0].name&&(l="Player 2"),r=5-[...e.boards][0].sunkShips.length),n.textContent=`${l} Won!`,a.textContent=`${l} had ${r} left!`,s.style.display="flex",c.addEventListener("click",(()=>{location.reload()}))}()}function C(){return"assets/sfx/we-are-8-bit.mp3"===n.song?function(){const e=new Audio("assets/sfx/we-are-8-bit.mp3");return e.loop=!0,e}():"assets/sfx/cant-escape-fight-8-bit.mp3"===n.song?function(){const e=new Audio("assets/sfx/cant-escape-fight-8-bit.mp3");return e.loop=!0,e}():void 0}function S(){const e=document.getElementById("options-menu"),t=document.getElementById("menu");document.getElementById("credits-scroll").style.display="none",e.style.display="none",t.style.display="flex"}!function(){const t=document.getElementById("play"),s=document.getElementById("play-card");t.addEventListener("click",(()=>{s.style.display="none",function(){n.currentlyPlaying=C(),n.currentlyPlaying.play();const t=document.getElementById("menu");t.style.display="flex";const s=document.getElementById("pvc"),c=document.getElementById("multiplayer"),l=document.getElementById("options"),r=document.getElementById("single-player-name"),i=document.getElementById("multiplayer-name"),d=document.getElementById("return-to-menu");s.addEventListener("click",(()=>{e.mode="PvC",r.style.display="flex",i.style.display="none"})),c.addEventListener("click",(()=>{e.mode="PvP",r.style.display="none",i.style.display="flex"})),l.addEventListener("click",(()=>{const e=document.getElementById("options-menu"),s=document.getElementById("credits"),a=document.getElementById("credits-scroll"),c=document.getElementById("music"),l=document.getElementById("sfx-modal");c.addEventListener("click",(()=>{l.style.display="flex",function(){document.getElementById("music"),document.getElementById("sfx-modal");const e=document.getElementById("high-volume"),t=document.getElementById("medium-volume"),s=document.getElementById("low-volume"),a=document.getElementById("we-are"),c=document.getElementById("cant-escape");e.addEventListener("click",(()=>{e.classList.add("selected"),t.classList.remove("selected"),s.classList.remove("selected"),n.volume=1,n.currentlyPlaying.volume=n.volume})),t.addEventListener("click",(()=>{e.classList.remove("selected"),t.classList.add("selected"),s.classList.remove("selected"),n.volume=.66,n.currentlyPlaying.volume=n.volume})),s.addEventListener("click",(()=>{e.classList.remove("selected"),t.classList.remove("selected"),s.classList.add("selected"),n.volume=.33,n.currentlyPlaying.volume=n.volume})),a.addEventListener("click",(()=>{a.classList.add("selected"),c.classList.remove("selected"),n.song="assets/sfx/we-are-8-bit.mp3",n.currentlyPlaying.pause(),n.currentlyPlaying={},n.currentlyPlaying=C(),n.currentlyPlaying.volume=n.volume,n.currentlyPlaying.play()})),c.addEventListener("click",(()=>{c.classList.add("selected"),a.classList.remove("selected"),n.song="assets/sfx/cant-escape-fight-8-bit.mp3",n.currentlyPlaying.pause(),n.currentlyPlaying={},n.currentlyPlaying=C(),n.currentlyPlaying.volume=n.volume,n.currentlyPlaying.play()}))}(),c.style.display="none",s.style.display="none"})),s.addEventListener("click",(()=>{a.style.display="flex"})),t.style.display="none",e.style.display="flex",d.addEventListener("click",(()=>{S(),l.style.display="none",c.style.display="flex",s.style.display="flex"})),window.addEventListener("keypress",(function(e){"Enter"===e.key&&(S(),l.style.display="none",c.style.display="flex",s.style.display="flex")}))})),function(){const t=document.getElementById("new-game-btn-solo"),s=document.getElementById("new-game-btn-multiplayer"),n=(document.getElementById("single-player-name"),document.getElementById("multiplayer-name"),document.getElementById("menu")),c=document.getElementById("placement-page-body-container"),l=document.getElementById("single-player-input"),r=document.getElementById("player1-input"),i=document.getElementById("player2-input");t.addEventListener("click",(()=>{let t=new a(l.value),s=new a("Computer");e.players.push(t),e.players.push(s);const r=new o(l.value),i=new o("Computer");e.boards.push(r),e.boards.push(i),c.style.display="flex",n.style.display="none",b()})),s.addEventListener("click",(()=>{let t=new a(r.value),s=new a(i.value);e.players.push(t),e.players.push(s);const l=new o(r.value),d=new o(i.value);e.boards.push(l),e.boards.push(d),c.style.display="flex",n.style.display="none",b()}))}()}()}))}()})();