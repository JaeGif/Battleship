(()=>{"use strict";class e{static turn="player";static players=[];static boards=[];static mode="PvP";static wasHit=!1;static cpuAttacked=[];static gameOver=!1;static justSunk="";static sunkEventFlag=!1;static selectedAttack="attack";static sniperInvalidFlag=!1}class t{static cpuLastHit=[];static cpuTargetingAid=[];static attempts=0}class n{static axis="x";static currentShip=[];static currentShipIndex=0;static currentPlacementBoard="player"}class s{static volume=1;static song="assets/sfx/we-are-8-bit.mp3";static currentlyPlaying={}}const a=class{constructor(e="Computer"){this.name=e}attackCharges=0;previousHit=[];attack(e,t){let n=[parseInt(e[0]),parseInt(e[1])];if(0===t.recordAttack.length)return t.receiveAttack(n),!0;for(let e=0;e<t.recordAttack.length;e++)return(n[0]!=t.recordAttack[e][0]||n[1]!=t.recordAttack[e][1])&&(t.receiveAttack(n),!0)}_cpuAttack(e){let t=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());if(!this._onAvailableSpace([t,n],e))return this._cpuAttack(e);this.attack([t,n],e)}_defineAxis(){return 1===Math.floor(2*Math.random())?"x":"y"}_cpuSmartMove(e){const n=[[...t.cpuLastHit][0][0],[...t.cpuLastHit][0][1]];let s=[],a=n[0],r=n[1];return 0===t.attempts&&(a++,s.push(a),s.push(r)),1===t.attempts&&(r++,s.push(a),s.push(r)),2===t.attempts&&(r--,s.push(a),s.push(r)),3===t.attempts&&(a--,s.push(a),s.push(r)),-1===s[0]||-1===s[1]||10===s[0]||10===s[1]||!this._onAvailableSpace(s,e)&&t.attempts<4?(t.attempts++,this._cpuSmartMove(e)):this._onAvailableSpace(s,e)&&t.attempts<4?(t.attempts=0,this.attack(s,e)):(t.attempts=0,void this._cpuAttack(e))}_onAvailableSpace(e,t){for(let n=0;n<t.recordAttack.length;n++)if(e[0]===t.recordAttack[n][0]&&e[1]===t.recordAttack[n][1])return!1;return!0}cpuAttackPattern(e){0===t.cpuLastHit.length?this._cpuAttack(e):this._cpuSmartMove(e)}_inBounds(e){return!(e[0]>9||e[1]>9||e[0]<0||e[1]<0)}radarAttack(e,t){this.attack(e,t);let n=0,s=[],a=[parseInt(e[0]),parseInt(e[1])];const r=[[a[0]-1,a[1]-1],[a[0]-1,a[1]],[a[0]-1,a[1]+1],[a[0],a[1]+1],[a[0]+1,a[1]+1],[a[0]+1,a[1]],[a[0]+1,a[1]-1],[a[0],a[1]-1]];for(let e=0;e<r.length;e++)r[e][0]<10&&r[e][1]<10&&r[e][0]>=0&&r[e][1]>=0&&s.push(r[e]);for(let e=0;e<s.length;e++)for(let a=0;a<t.shipCoordinates.length;a++)for(let r=0;r<t.shipCoordinates[a].location.length;r++)s[e][0]===t.shipCoordinates[a].location[r][0]&&s[e][1]===t.shipCoordinates[a].location[r][1]&&n++;return n}sniperAttack(t){if(0===t.recordAttack.length)return this.attack([t.shipCoordinates[0].location[0][0],t.shipCoordinates[0].location[0][1]],t);for(let n=0;n<t.shipCoordinates.length;n++)for(let s=0;s<t.shipCoordinates[n].location.length;s++){for(let a=0;a<t.recordAttack.length;a++)t.shipCoordinates[n].location[s][0]===t.recordAttack[a][0]&&t.shipCoordinates[n].location[s][1]===t.recordAttack[a][1]&&(e.sniperInvalidFlag=!0);if(!e.sniperInvalidFlag)return this.attack([t.shipCoordinates[n].location[s][0],t.shipCoordinates[n].location[s][1]],t),[t.shipCoordinates[n].location[s][0],t.shipCoordinates[n].location[s][1]];e.sniperInvalidFlag=!1}}bombAttack(e,t){let n=[parseInt(e[0]),parseInt(e[1])];const s=[n,[n[0],n[1]+1],[n[0]+1,n[1]+1],[n[0]+1,n[1]]];let a=[];for(let e=0;e<s.length;e++)this._onAvailableSpace(s[e],t)&&this._inBounds(s[e])&&a.push(s[e]);return a}strikeAttack(e,t,n){let s=[],a=[],r=[],i=[],o=[parseInt(e[0]),parseInt(e[1])],l=o,c=o;if(r.push(o),"x"===t){for(let e=0;e<n.size;e++)this._inBounds([l[0]+1,l[1]])?(l=[l[0]+1,l[1]],a.push(l)):this._inBounds([c[0]-1,c[1]])&&(c=[c[0]-1,c[1]],a.push(c));for(let e=0;e<a.length;e++)this._onAvailableSpace(a[e],n)&&r.push(a[e]);return r}if("y"===t){for(let e=0;e<n.size;e++)this._inBounds([l[0],l[1]+1])?(l=[l[0],l[1]+1],s.push(l)):this._inBounds([c[0],c[1]-1])&&(c=[c[0],c[1]-1],s.push(c));for(let e=0;e<s.length;e++)this._onAvailableSpace(s[e],n)&&i.push(s[e]);return i}}};function r(){const e=new Audio("assets/sfx/hit.wav");return e.volume=s.volume,e}function i(){const e=new Audio("assets/sfx/miss.mp3");return e.volume=s.volume,e}const o=class{constructor(e,t=null){this.name=t,this.length=e,this.hitCoordinates=[]}getHitCoordinates(){return this.hitCoordinates}hit(e){this.hitCoordinates.push(e)}isSunk(){return this.length===this.hitCoordinates.length}},l=class{constructor(e,t=10){this.name=e,this.size=t}shipCoordinates=[];recordAttack=[];sunkShips=[];receiveAttack(n){let s="miss";this.recordAttack.push(n),"computer"===e.turn&&e.cpuAttacked.push(n);for(let a=0;a<this.shipCoordinates.length;a++)for(let r=0;r<this.shipCoordinates[a].location.length;r++)if(n[0]===this.shipCoordinates[a].location[r][0]&&n[1]===this.shipCoordinates[a].location[r][1])return"bomb"!==e.selectedAttack&&"strike"!==e.selectedAttack||(s="hit"),this.shipCoordinates[a].object.hit(n),e.wasHit=!0,"computer"===e.turn&&(t.cpuLastHit.push(n),2===t.cpuLastHit.length&&t.cpuLastHit.shift()),this.shipCoordinates[a].object.isSunk()&&(this.sunkShips.push(this.shipCoordinates[a].object),e.justSunk=this.shipCoordinates[a].object.name,e.sunkEventFlag=!0,"computer"===e.turn&&(t.cpuLastHit=[])),"bomb"!==e.selectedAttack&&"strike"!==e.selectedAttack||g(n,s),!0;return"bomb"!==e.selectedAttack&&"strike"!==e.selectedAttack||g(n,s),!1}removeShip(){return this.shipCoordinates.pop()}addShip(e,t){this.shipCoordinates.push({object:e,location:t})}randomAddShips(){let e=new o(5,"Carrier"),t=new o(4,"Battleship"),n=new o(2,"Destroyer"),s=new o(3,"Cruiser"),a=new o(3,"Submarine");this._randomizeShips(e),this._randomizeShips(t),this._randomizeShips(s),this._randomizeShips(n),this._randomizeShips(a)}_isEmptySpace(e){for(let t=0;t<e.length;t++)for(let n=0;n<this.shipCoordinates.length;n++)for(let s=0;s<this.shipCoordinates[n].location.length;s++)if(e[t][0]===this.shipCoordinates[n].location[s][0]&&e[t][1]===this.shipCoordinates[n].location[s][1])return!1;return!0}_randomizeShips(e,t=10){let n=[];const s=e.length;let a=this._defineAxis(),r=Math.floor(10*Math.random()),i=Math.floor(10*Math.random());if(n.push([r,i]),"x"===a&&r+s<=t)for(let e=0;e<s-1;e++)r++,n.push([r,i]);else if("x"===a&&r+s>t)for(let e=0;e<s-1;e++)r--,n.push([r,i]);if("y"===a&&i+s<=t)for(let e=0;e<s-1;e++)i++,n.push([r,i]);else if("y"===a&&i+s>t)for(let e=0;e<s-1;e++)i--,n.push([r,i]);if(!this._isEmptySpace(n))return this._randomizeShips(e,t);this.addShip(e,n)}_defineAxis(){return 1===Math.floor(2*Math.random())?"x":"y"}getSunkShips(){return this.sunkShips}allShipsSunk(){return 5===this.sunkShips.length}};function c(e){"Space"===e.code&&("x"===n.axis?n.axis="y":"y"===n.axis&&(n.axis="x"))}function d(){const t=document.getElementById("current-player-board"),n=document.getElementById("current-opponent-board"),s=document.getElementById("turn"),a=document.getElementById("player-energy"),i=[...e.players][0],o=[...e.boards][1],l=[...e.players][1],c=[...e.boards][0],d=document.getElementById("opponent-energy");let u="Hit!";const p=r();if("player"===e.turn){for(let e=0;e<n.children.length;e++)"DIV"===n.children[e].tagName&&n.children[e].classList.add("revoke-events");n.addEventListener("click",(()=>{i.attackCharges-=7,a.textContent=`Energy: ${i.attackCharges}`;const t=i.sniperAttack(o);let r="b"+t[0]+","+t[1];const l=document.getElementById(`${r}`);p.play(),l.classList.add("hit"),l.classList.add("permanently-revoke-events"),!0===e.sunkEventFlag&&(u=`You sunk the ${e.justSunk}!`,e.sunkEventFlag=!1);for(let e=0;e<n.children.length;e++)"DIV"===n.children[e].tagName&&n.children[e].classList.remove("revoke-events");o.allShipsSunk()&&(e.gameOver=!0,B()),e.selectedAttack="attack",e.turn="opponent",s.textContent=`${u} It's ${y()}'s Turn!`}),{once:!0})}else if("opponent"===e.turn){for(let e=0;e<t.children.length;e++)"DIV"===t.children[e].tagName&&t.children[e].classList.add("revoke-events");t.addEventListener("click",(()=>{l.attackCharges-=7,d.textContent=`Energy: ${l.attackCharges}`;const n=l.sniperAttack(c);let a="a"+n[0]+","+n[1];const r=document.getElementById(`${a}`);p.play(),r.classList.add("hit"),r.classList.add("permanently-revoke-events"),!0===e.sunkEventFlag&&(u=`You sunk the ${e.justSunk}!`,e.sunkEventFlag=!1);for(let e=0;e<t.children.length;e++)"DIV"===t.children[e].tagName&&t.children[e].classList.remove("revoke-events");c.allShipsSunk()&&(e.gameOver=!0,B()),e.selectedAttack="attack",e.turn="player",s.textContent=`${u} It's ${y()}'s Turn!`}),{once:!0})}}function u(e){const t=p(e),n=document.getElementById("current-opponent-board");for(let s=0;s<e*e;s++){const e=document.createElement("div");e.className="opponent-grid-elements",e.id=`b${t.next().value}`,m(e),n.appendChild(e)}}function*p(e){let t=[0,0];for(;t[0]<=e-1&&t[1]<=e-1;)0===t[0]&&0===t[1]&&(yield t),t[1]++,t[1]===e&&(t[0]++,t[1]=0),yield t}function m(t){t.addEventListener("click",(()=>{let s="";const a=r(),o=i(),l=document.getElementById("turn"),d=document.getElementById("player-energy");if("player"!==e.turn)return void m(t);const u=[...e.players][0],p=[...e.boards][1],h=t.id.slice(1).split(",");if("attack"===e.selectedAttack)u.attack(h,p),u.attackCharges++,d.textContent=`Energy: ${u.attackCharges}`;else if("radar"===e.selectedAttack){u.attackCharges-=4,d.textContent=`Energy: ${u.attackCharges}`;let n=u.radarAttack(h,p);t.textContent=`${n}`,t.style.textAlign="center",t.style.padding=".5rem",t.style.fontSize="1.75rem",e.selectedAttack="attack"}else if("bomb"===e.selectedAttack){u.attackCharges-=5,d.textContent=`Energy: ${u.attackCharges}`;const t=u.bombAttack(h,p);for(let e=0;e<t.length;e++){u.attack(t[e],p);let n="b"+t[e][0]+","+t[e][1];document.getElementById(`${n}`).classList.add("permanently-revoke-events")}e.selectedAttack="attack"}else if("strike"===e.selectedAttack){u.attackCharges-=14,d.textContent=`Energy: ${u.attackCharges}`;const t=u.strikeAttack(h,n.axis,p);for(let e=0;e<t.length;e++){u.attack(t[e],p);let n="b"+t[e][0]+","+t[e][1];document.getElementById(`${n}`).classList.add("permanently-revoke-events")}document.removeEventListener("keyup",c),e.selectedAttack="attack",n.axis="x"}p.allShipsSunk()&&(e.gameOver=!0,B()),!0===e.wasHit?(a.play(),t.classList.add("hit"),s="Its a hit!",!0===e.sunkEventFlag&&(s=`You sunk the ${e.justSunk}!`,e.sunkEventFlag=!1),e.wasHit=!1):(o.play(),s="Miss...",t.classList.add("miss")),"PvP"===e.mode?(e.turn="opponent",l.textContent=`${s} It's ${y()}'s Turn!`):"PvC"===e.mode&&(e.turn="computer",l.textContent=`${s} It's ${y()}'s Turn!`,async function(){let t="";const n=document.getElementById("turn");await function(){const e=1500*Math.random();return new Promise((t=>setTimeout(t,e)))}();const s=r(),a=i(),o=[...e.players][1],l=[...e.boards][0];o.cpuAttackPattern(l);let c=[...e.cpuAttacked][0][0]+","+[...e.cpuAttacked][0][1];e.cpuAttacked=[];const d=document.getElementById(`a${c}`);l.allShipsSunk()&&(e.gameOver=!0,B()),!0===e.wasHit?(s.play(),d.classList.remove("reveal"),d.classList.add("hit"),t="Its a hit!",!0===e.sunkEventFlag&&(t=`Computer sunk the ${e.justSunk}!`,e.sunkEventFlag=!1),e.wasHit=!1):(a.play(),t="Miss...",d.classList.add("miss")),e.turn="player",n.textContent=`${t} It's ${y()}'s Turn!`}())}),{once:!0})}function h(t){t.addEventListener("click",(()=>{const s=r(),a=i();let o="";const l=document.getElementById("turn"),d=document.getElementById("opponent-energy");if("player"===e.turn)return void h(t);const u=[...e.players][1],p=[...e.boards][0],m=t.id.slice(1).split(",");if("PvP"===e.mode){if("attack"===e.selectedAttack)u.attack(m,p),u.attackCharges++,d.textContent=`Energy: ${u.attackCharges}`;else if("radar"===e.selectedAttack){u.attackCharges-=4,d.textContent=`Energy: ${u.attackCharges}`;let n=u.radarAttack(m,p);t.textContent=`${n}`,t.style.textAlign="center",t.style.padding=".5rem",t.style.fontSize="1.75rem",e.selectedAttack="attack"}else if("bomb"===e.selectedAttack){u.attackCharges-=5,d.textContent=`Energy: ${u.attackCharges}`;const t=u.bombAttack(m,p);for(let e=0;e<t.length;e++){u.attack(t[e],p);let n="a"+t[e][0]+","+t[e][1];document.getElementById(`${n}`).classList.add("permanently-revoke-events")}e.selectedAttack="attack"}else if("strike"===e.selectedAttack){u.attackCharges-=14,d.textContent=`Energy: ${u.attackCharges}`;const t=u.strikeAttack(m,n.axis,p);for(let e=0;e<t.length;e++){u.attack(t[e],p);let n="a"+t[e][0]+","+t[e][1];document.getElementById(`${n}`).classList.add("permanently-revoke-events")}document.removeEventListener("keyup",c),e.selectedAttack="attack",n.axis="x"}!0===e.wasHit?(s.play(),t.classList.add("hit"),o="Its a hit!",!0===e.sunkEventFlag&&(o=`You sunk the ${e.justSunk}!`,e.sunkEventFlag=!1),e.wasHit=!1):(a.play(),t.classList.add("miss"),o="Miss...")}p.allShipsSunk()&&(e.gameOver=!0,B()),e.turn="player",l.textContent=`${o} It's ${y()}'s Turn!`}),{once:!0})}function y(){const t=[...e.boards][0],n=[...e.boards][1];switch(e.turn){case"player":return""===t.name?"Player 1":t.name;case"opponent":return""===n.name?"Player 2":n.name;case"computer":return"Computer"}}function g(t,n){if("player"===e.turn&&"hit"===n){let e="b"+t[0]+","+t[1];document.getElementById(`${e}`).classList.add("hit")}else if("player"===e.turn&&"miss"===n){let e="b"+t[0]+","+t[1];document.getElementById(`${e}`).classList.add("miss")}if("opponent"===e.turn&&"hit"===n){let e="a"+t[0]+","+t[1];document.getElementById(`${e}`).classList.add("hit")}else if("opponent"===e.turn&&"miss"===n){let e="a"+t[0]+","+t[1];document.getElementById(`${e}`).classList.add("miss")}}function k(t){t.addEventListener("dragover",(e=>{e.preventDefault();let s=t.id;if(s=s.split(","),"x"===n.axis)for(let e=0;e<n.currentShip[n.currentShipIndex].shipObj.length;e++){let t=s[0]+","+(parseInt(s[1])+e);document.getElementById(`${t}`)}})),t.addEventListener("dragleave",(e=>{let s=t.id;if(s=s.split(","),"x"===n.axis)for(let e=0;e<n.currentShip[n.currentShipIndex].shipObj.length;e++){let t=s[0]+","+(parseInt(s[1])+e);document.getElementById(`${t}`)}})),t.addEventListener("drop",(s=>{s.preventDefault();let a=t.id;a=a.split(",");let r=[];if("x"===n.axis&&parseInt(a[1])+n.currentShip[n.currentShipIndex].shipObj.length-1>9||"y"===n.axis&&parseInt(a[0])+n.currentShip[n.currentShipIndex].shipObj.length-1>9)return!1;if("x"===n.axis)for(let e=0;e<n.currentShip[n.currentShipIndex].shipObj.length;e++)r.push([parseInt(a[0]),parseInt(a[1])+e]);if("y"===n.axis)for(let e=0;e<n.currentShip[n.currentShipIndex].shipObj.length;e++)r.push([parseInt(a[0])+e,parseInt(a[1])]);if(!function(t){let s;s="player"===n.currentPlacementBoard?[...e.boards][0]:[...e.boards][1];for(let e=0;e<t.length;e++)for(let n=0;n<s.shipCoordinates.length;n++)for(let a=0;a<s.shipCoordinates[n].location.length;a++)if(t[e][0]===s.shipCoordinates[n].location[a][0]&&t[e][1]===s.shipCoordinates[n].location[a][1])return!1;return!0}(r))return!1;const i=s.dataTransfer.getData("text"),o=document.getElementById(i);var l;s.target.appendChild(o),o.setAttribute("draggable",!1),l=r,"player"===n.currentPlacementBoard?[...e.boards][0].addShip([...n.currentShip][n.currentShipIndex].shipObj,l):"opponent"===n.currentPlacementBoard&&[...e.boards][1].addShip([...n.currentShip][n.currentShipIndex].shipObj,l),v(),f(),n.currentShipIndex<5&&E()}))}function f(){if(n.currentShipIndex++,n.currentShipIndex>=5){const t=document.getElementById("game"),s=document.getElementById("placement-page-body-container");if("PvC"===e.mode)[...e.boards][1].randomAddShips();else if("PvP"===e.mode&&"player"===n.currentPlacementBoard)return function(){v(),n.currentShip=[],n.currentShipIndex=0,n.currentPlacementBoard="opponent";const e=document.getElementById("placement-board");for(;e.firstChild;)e.removeChild(e.lastChild);const t=document.getElementById("unplaced-ship-container");for(;t.firstChild;)t.lastChild.className="",t.removeChild(t.lastChild)}(),I();s.style.display="none",t.style.display="flex",function(t=10){!async function(){const e=await fetch("https://api.giphy.com/v1/gifs/o0eOCNkn7cSD6?api_key=XQjjxBQQYTlh7yBaVu1JXQ6YbH5dno3B&s=cats",{mode:"cors"}),t=await e.json();document.getElementById("gg-img").src=t.data.images.original.url}();const n=document.getElementById("game");document.body.style.backgroundImage="none",async function(){const e=await fetch("https://api.giphy.com/v1/gifs/XPlcxsFs8BIKk?api_key=XQjjxBQQYTlh7yBaVu1JXQ6YbH5dno3B&s=cats",{mode:"cors"}),t=await e.json();document.body.style.backgroundImage=`url(${t.data.images.original.url})`}();const s=document.getElementById("placement-page-body-container");!function(){const t=[...e.boards][0],n=[...e.boards][1],s=document.getElementById("player-name"),a=document.getElementById("player-2-name");""===t.name?s.textContent="Player 1":s.textContent=`${t.name}`,""===n.name?a.textContent="Player 2":a.textContent=`${n.name}`}(),function(e){const t=p(e),n=document.getElementById("current-player-board");for(let s=0;s<e*e;s++){const e=document.createElement("div");e.className="player-grid-elements",e.id=`a${t.next().value}`,h(e),n.appendChild(e)}}(t),"PvP"===e.mode?u(t):"PvC"===e.mode&&(function(){let t="";const n=[...e.boards][0];for(let e=0;e<n.shipCoordinates.length;e++)for(let s=0;s<n.shipCoordinates[e].location.length;s++)t=n.shipCoordinates[e].location[s][0]+","+n.shipCoordinates[e].location[s][1],document.getElementById(`a${t}`).classList.add("reveal")}(),u(t)),function(){const t=document.getElementById("radar-attack");document.getElementById("radar-attack-opponent").addEventListener("click",(()=>{"opponent"===e.turn&&([...e.players][1].attackCharges>=4?e.selectedAttack="radar":document.getElementById("turn").textContent="You dont have enough energy!")})),t.addEventListener("click",(()=>{"player"===e.turn&&([...e.players][0].attackCharges>=4?e.selectedAttack="radar":document.getElementById("turn").textContent="You dont have enough energy!")}));const n=document.getElementById("sniper-attack"),s=document.getElementById("sniper-attack-opponent");n.addEventListener("click",(()=>{"player"===e.turn&&([...e.players][0].attackCharges>=7?(e.selectedAttack="sniper",d()):document.getElementById("turn").textContent="You dont have enough energy!")})),s.addEventListener("click",(()=>{"opponent"===e.turn&&([...e.players][1].attackCharges>=7?(e.selectedAttack="sniper",d()):document.getElementById("turn").textContent="You dont have enough energy!")}));const a=document.getElementById("bomb-attack"),r=document.getElementById("bomb-attack-opponent");a.addEventListener("click",(()=>{"player"===e.turn&&([...e.players][0].attackCharges>=5?e.selectedAttack="bomb":document.getElementById("turn").textContent="You dont have enough energy!")})),r.addEventListener("click",(()=>{"opponent"===e.turn&&([...e.players][1].attackCharges>=5?e.selectedAttack="bomb":document.getElementById("turn").textContent="You dont have enough energy!")}));const i=document.getElementById("strike-attack"),o=document.getElementById("strike-attack-opponent");i.addEventListener("click",(()=>{"player"===e.turn&&([...e.players][0].attackCharges>=14?(e.selectedAttack="strike",document.addEventListener("keyup",c)):document.getElementById("turn").textContent="You dont have enough energy!")})),o.addEventListener("click",(()=>{"opponent"===e.turn&&([...e.players][1].attackCharges>=14?(e.selectedAttack="strike",document.addEventListener("keyup",c)):document.getElementById("turn").textContent="You dont have enough energy!")}))}(),s.style.display="none",n.style.display="flex",document.getElementById("turn").textContent=`${y()} start your offensive!`}()}}function v(){n.axis="x",document.getElementById("unplaced-ship-container").style.height="fit-content"}function E(){const e=document.createElement("img");e.className="ship-img";const t=document.getElementById("ship-name"),s=document.getElementById("ship-length");document.getElementById("unplaced-ship-container").appendChild(e),function(){let e;n.currentPlacementBoard,e=document.getElementsByClassName("ship-img")[n.currentShipIndex],e.addEventListener("dragstart",(e=>{e.dataTransfer.clearData(),e.dataTransfer.setData("text/plain",e.target.id)}))}(),e.id=`${[...n.currentShip][n.currentShipIndex].shipObj.name}`,e.src=`${[...n.currentShip][n.currentShipIndex].shipSrcImg}`,t.textContent=`Name: ${[...n.currentShip][n.currentShipIndex].shipObj.name}`,s.textContent=`Length: ${[...n.currentShip][n.currentShipIndex].shipObj.length}`,e.setAttribute("draggable",!0)}function I(){document.getElementById("randomize-button").addEventListener("click",x);const t=document.getElementById("placement-board-name");let s=[...e.players][1].name;""===s&&(s="Player 2"),t.textContent=`${s}'s board`,document.getElementById("placement-page-body-container").display="flex",function(e=10){const t=p(e),n=document.getElementById("placement-board");for(let s=0;s<e*e;s++){const e=document.createElement("div");e.id=`${t.next().value}`,k(e),n.appendChild(e)}}(),function(){let e=[{shipObj:new o(5,"carrier"),shipSrcImg:"assets/ships/carrier.png"},{shipObj:new o(4,"battleship"),shipSrcImg:"assets/ships/battleship.png"},{shipObj:new o(2,"destroyer"),shipSrcImg:"assets/ships/gamsi.png"},{shipObj:new o(3,"cruiser"),shipSrcImg:"assets/ships/frigate.png"},{shipObj:new o(3,"submarine"),shipSrcImg:"assets/ships/submarine.png"}];n.currentShip=e}(),"player"===n.currentPlacementBoard&&(s=[...e.players][0].name,""===s&&(s="Player 1"),t.textContent=`${s}'s board`,E(),function(){const e=document.getElementById("unplaced-ship-container"),t=6*[...n.currentShip][n.currentShipIndex].shipObj.length;document.getElementById("change-orientation").addEventListener("click",(()=>{let s=document.getElementsByClassName("ship-img");"x"===n.axis?(n.axis="y",s[n.currentShipIndex].classList.add("y"),e.style.height=`${t}vh`):(n.axis="x",s[n.currentShipIndex].classList.remove("y"),e.style.height="fit-content")}))}())}function x(){"player"===n.currentPlacementBoard?(document.getElementById("randomize-button").removeEventListener("click",x),[...e.boards][0].randomAddShips(),n.currentShipIndex=5,f(),"PvP"===e.mode&&E()):"opponent"===n.currentPlacementBoard&&([...e.boards][1].randomAddShips(),n.currentShipIndex=5,f())}function C(){I()}function B(){!function(){const t=document.getElementById("game-over-modal"),n=document.getElementById("winner-name"),s=document.getElementById("num-remaining"),a=document.getElementsByClassName("replay-btn")[0];let r,i=0;[...e.boards][0].allShipsSunk()?(r=[...e.players][1].name,i=5-[...e.boards][1].sunkShips.length):(r=[...e.players][0].name,i=5-[...e.boards][0].sunkShips.length),n.textContent=`${r} Won!`,s.textContent=`${r} had ${i} left!`,t.style.display="flex",a.addEventListener("click",(()=>{location.reload()}))}()}function b(){return"assets/sfx/we-are-8-bit.mp3"===s.song?function(){const e=new Audio("assets/sfx/we-are-8-bit.mp3");return e.loop=!0,e}():"assets/sfx/cant-escape-fight-8-bit.mp3"===s.song?function(){const e=new Audio("assets/sfx/cant-escape-fight-8-bit.mp3");return e.loop=!0,e}():void 0}function S(){const e=document.getElementById("options-menu"),t=document.getElementById("menu");document.getElementById("credits-scroll").style.display="none",e.style.display="none",t.style.display="flex"}!function(){const t=document.getElementById("play"),n=document.getElementById("play-card");t.addEventListener("click",(()=>{n.style.display="none",function(){s.currentlyPlaying=b(),s.currentlyPlaying.play();const t=document.getElementById("menu");t.style.display="flex";const n=document.getElementById("pvc"),r=document.getElementById("multiplayer"),i=document.getElementById("options"),o=document.getElementById("single-player-name"),c=document.getElementById("multiplayer-name"),d=document.getElementById("return-to-menu");n.addEventListener("click",(()=>{e.mode="PvC",o.style.display="flex",c.style.display="none"})),r.addEventListener("click",(()=>{e.mode="PvP",o.style.display="none",c.style.display="flex"})),i.addEventListener("click",(()=>{const e=document.getElementById("options-menu"),n=document.getElementById("credits"),a=document.getElementById("credits-scroll"),r=document.getElementById("music"),i=document.getElementById("sfx-modal");r.addEventListener("click",(()=>{i.style.display="flex",function(){document.getElementById("music"),document.getElementById("sfx-modal");const e=document.getElementById("high-volume"),t=document.getElementById("medium-volume"),n=document.getElementById("low-volume"),a=document.getElementById("we-are"),r=document.getElementById("cant-escape");e.addEventListener("click",(()=>{e.classList.add("selected"),t.classList.remove("selected"),n.classList.remove("selected"),s.volume=1,s.currentlyPlaying.volume=s.volume})),t.addEventListener("click",(()=>{e.classList.remove("selected"),t.classList.add("selected"),n.classList.remove("selected"),s.volume=.66,s.currentlyPlaying.volume=s.volume})),n.addEventListener("click",(()=>{e.classList.remove("selected"),t.classList.remove("selected"),n.classList.add("selected"),s.volume=.33,s.currentlyPlaying.volume=s.volume})),a.addEventListener("click",(()=>{a.classList.add("selected"),r.classList.remove("selected"),s.song="assets/sfx/we-are-8-bit.mp3",s.currentlyPlaying.pause(),s.currentlyPlaying={},s.currentlyPlaying=b(),s.currentlyPlaying.volume=s.volume,s.currentlyPlaying.play()})),r.addEventListener("click",(()=>{r.classList.add("selected"),a.classList.remove("selected"),s.song="assets/sfx/cant-escape-fight-8-bit.mp3",s.currentlyPlaying.pause(),s.currentlyPlaying={},s.currentlyPlaying=b(),s.currentlyPlaying.volume=s.volume,s.currentlyPlaying.play()}))}(),r.style.display="none",n.style.display="none"})),n.addEventListener("click",(()=>{a.style.display="flex"})),t.style.display="none",e.style.display="flex",d.addEventListener("click",(()=>{S(),i.style.display="none",r.style.display="flex",n.style.display="flex"})),window.addEventListener("keypress",(function(e){"Enter"===e.key&&(S(),i.style.display="none",r.style.display="flex",n.style.display="flex")}))})),function(){const t=document.getElementById("new-game-btn-solo"),n=document.getElementById("new-game-btn-multiplayer"),s=(document.getElementById("single-player-name"),document.getElementById("multiplayer-name"),document.getElementById("menu")),r=document.getElementById("placement-page-body-container"),i=document.getElementById("single-player-input"),o=document.getElementById("player1-input"),c=document.getElementById("player2-input");t.addEventListener("click",(()=>{let t=new a(i.value),n=new a("Computer");e.players.push(t),e.players.push(n);const o=new l(i.value),c=new l("Computer");e.boards.push(o),e.boards.push(c),r.style.display="flex",s.style.display="none",C()})),n.addEventListener("click",(()=>{let t=new a(o.value),n=new a(c.value);e.players.push(t),e.players.push(n);const i=new l(o.value),d=new l(c.value);e.boards.push(i),e.boards.push(d),r.style.display="flex",s.style.display="none",C()}))}()}()}))}()})();