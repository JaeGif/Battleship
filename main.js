(()=>{"use strict";class e{static turn="player";static players=[];static boards=[];static mode="PvP";static wasHit=!1;static cpuAttacked=[];static gameOver=!1;static justSunk="";static sunkEventFlag=!1;static selectedAttack="attack";static sniperInvalidFlag=!1}class t{static cpuLastHit=[];static cpuTargetingAid=[];static attempts=0}class n{static axis="x";static currentShip=[];static currentShipIndex=0;static currentPlacementBoard="player";static returnState="menu"}class s{static volume=1;static song="assets/sfx/we-are-8-bit.mp3";static currentlyPlaying={}}const a=class{constructor(e="Computer"){this.name=e}attackCharges=0;previousHit=[];attack(e,t){let n=[parseInt(e[0]),parseInt(e[1])];if(0===t.recordAttack.length)return t.receiveAttack(n),!0;for(let e=0;e<t.recordAttack.length;e++)return(n[0]!=t.recordAttack[e][0]||n[1]!=t.recordAttack[e][1])&&(t.receiveAttack(n),!0)}_cpuAttack(e){let t=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());if(!this._onAvailableSpace([t,n],e))return this._cpuAttack(e);this.attack([t,n],e)}_defineAxis(){return 1===Math.floor(2*Math.random())?"x":"y"}_cpuSmartMove(e){const n=[[...t.cpuLastHit][0][0],[...t.cpuLastHit][0][1]];let s=[],a=n[0],c=n[1];return 0===t.attempts&&(a++,s.push(a),s.push(c)),1===t.attempts&&(c++,s.push(a),s.push(c)),2===t.attempts&&(c--,s.push(a),s.push(c)),3===t.attempts&&(a--,s.push(a),s.push(c)),-1===s[0]||-1===s[1]||10===s[0]||10===s[1]||!this._onAvailableSpace(s,e)&&t.attempts<4?(t.attempts++,this._cpuSmartMove(e)):this._onAvailableSpace(s,e)&&t.attempts<4?(t.attempts=0,this.attack(s,e)):(t.attempts=0,void this._cpuAttack(e))}_onAvailableSpace(e,t){for(let n=0;n<t.recordAttack.length;n++)if(e[0]===t.recordAttack[n][0]&&e[1]===t.recordAttack[n][1])return!1;return!0}cpuAttackPattern(e){0===t.cpuLastHit.length?this._cpuAttack(e):this._cpuSmartMove(e)}_inBounds(e){return!(e[0]>9||e[1]>9||e[0]<0||e[1]<0)}radarAttack(e,t){this.attack(e,t);let n=0,s=[],a=[parseInt(e[0]),parseInt(e[1])];const c=[[a[0]-1,a[1]-1],[a[0]-1,a[1]],[a[0]-1,a[1]+1],[a[0],a[1]+1],[a[0]+1,a[1]+1],[a[0]+1,a[1]],[a[0]+1,a[1]-1],[a[0],a[1]-1]];for(let e=0;e<c.length;e++)c[e][0]<10&&c[e][1]<10&&c[e][0]>=0&&c[e][1]>=0&&s.push(c[e]);for(let e=0;e<s.length;e++)for(let a=0;a<t.shipCoordinates.length;a++)for(let c=0;c<t.shipCoordinates[a].location.length;c++)s[e][0]===t.shipCoordinates[a].location[c][0]&&s[e][1]===t.shipCoordinates[a].location[c][1]&&n++;return n}sniperAttack(t){if(0===t.recordAttack.length)return this.attack([t.shipCoordinates[0].location[0][0],t.shipCoordinates[0].location[0][1]],t);for(let n=0;n<t.shipCoordinates.length;n++)for(let s=0;s<t.shipCoordinates[n].location.length;s++){for(let a=0;a<t.recordAttack.length;a++)t.shipCoordinates[n].location[s][0]===t.recordAttack[a][0]&&t.shipCoordinates[n].location[s][1]===t.recordAttack[a][1]&&(e.sniperInvalidFlag=!0);if(!e.sniperInvalidFlag)return this.attack([t.shipCoordinates[n].location[s][0],t.shipCoordinates[n].location[s][1]],t),[t.shipCoordinates[n].location[s][0],t.shipCoordinates[n].location[s][1]];e.sniperInvalidFlag=!1}}bombAttack(e,t){let n=[parseInt(e[0]),parseInt(e[1])];const s=[n,[n[0],n[1]+1],[n[0]+1,n[1]+1],[n[0]+1,n[1]]];let a=[];for(let e=0;e<s.length;e++)this._onAvailableSpace(s[e],t)&&this._inBounds(s[e])&&a.push(s[e]);return a}strikeAttack(e,t,n){let s=[],a=[],c=[],l=[],r=[parseInt(e[0]),parseInt(e[1])],o=r,i=r;if(c.push(r),"x"===t){for(let e=0;e<n.size;e++)this._inBounds([o[0]+1,o[1]])?(o=[o[0]+1,o[1]],a.push(o)):this._inBounds([i[0]-1,i[1]])&&(i=[i[0]-1,i[1]],a.push(i));for(let e=0;e<a.length;e++)this._onAvailableSpace(a[e],n)&&c.push(a[e]);return c}if("y"===t){for(let e=0;e<n.size;e++)this._inBounds([o[0],o[1]+1])?(o=[o[0],o[1]+1],s.push(o)):this._inBounds([i[0],i[1]-1])&&(i=[i[0],i[1]-1],s.push(i));for(let e=0;e<s.length;e++)this._onAvailableSpace(s[e],n)&&l.push(s[e]);return l}}};function c(){const e=new Audio("assets/sfx/hit.wav");return e.volume=s.volume,e}function l(){const e=new Audio("assets/sfx/miss.mp3");return e.volume=s.volume,e}const r=class{constructor(e,t=null){this.name=t,this.length=e,this.hitCoordinates=[]}getHitCoordinates(){return this.hitCoordinates}hit(e){this.hitCoordinates.push(e)}isSunk(){return this.length===this.hitCoordinates.length}},o=class{constructor(e,t=10){this.name=e,this.size=t}shipCoordinates=[];recordAttack=[];sunkShips=[];receiveAttack(n){let s="miss";this.recordAttack.push(n),"computer"===e.turn&&e.cpuAttacked.push(n);for(let a=0;a<this.shipCoordinates.length;a++)for(let c=0;c<this.shipCoordinates[a].location.length;c++)if(n[0]===this.shipCoordinates[a].location[c][0]&&n[1]===this.shipCoordinates[a].location[c][1])return"bomb"!==e.selectedAttack&&"strike"!==e.selectedAttack||(s="hit"),this.shipCoordinates[a].object.hit(n),e.wasHit=!0,"computer"===e.turn&&(t.cpuLastHit.push(n),2===t.cpuLastHit.length&&t.cpuLastHit.shift()),this.shipCoordinates[a].object.isSunk()&&(this.sunkShips.push(this.shipCoordinates[a].object),e.justSunk=this.shipCoordinates[a].object.name,e.sunkEventFlag=!0,"computer"===e.turn&&(t.cpuLastHit=[])),"bomb"!==e.selectedAttack&&"strike"!==e.selectedAttack||k(n,s),!0;return"bomb"!==e.selectedAttack&&"strike"!==e.selectedAttack||k(n,s),!1}removeShip(){return this.shipCoordinates.pop()}addShip(e,t){this.shipCoordinates.push({object:e,location:t})}randomAddShips(){let e=new r(5,"Carrier"),t=new r(4,"Battleship"),n=new r(2,"Destroyer"),s=new r(3,"Cruiser"),a=new r(3,"Submarine");this._randomizeShips(e),this._randomizeShips(t),this._randomizeShips(s),this._randomizeShips(n),this._randomizeShips(a)}_isEmptySpace(e){for(let t=0;t<e.length;t++)for(let n=0;n<this.shipCoordinates.length;n++)for(let s=0;s<this.shipCoordinates[n].location.length;s++)if(e[t][0]===this.shipCoordinates[n].location[s][0]&&e[t][1]===this.shipCoordinates[n].location[s][1])return!1;return!0}_randomizeShips(e,t=10){let n=[];const s=e.length;let a=this._defineAxis(),c=Math.floor(10*Math.random()),l=Math.floor(10*Math.random());if(n.push([c,l]),"x"===a&&c+s<=t)for(let e=0;e<s-1;e++)c++,n.push([c,l]);else if("x"===a&&c+s>t)for(let e=0;e<s-1;e++)c--,n.push([c,l]);if("y"===a&&l+s<=t)for(let e=0;e<s-1;e++)l++,n.push([c,l]);else if("y"===a&&l+s>t)for(let e=0;e<s-1;e++)l--,n.push([c,l]);if(!this._isEmptySpace(n))return this._randomizeShips(e,t);this.addShip(e,n)}_defineAxis(){return 1===Math.floor(2*Math.random())?"x":"y"}getSunkShips(){return this.sunkShips}allShipsSunk(){return 5===this.sunkShips.length}};function i(e){"Space"===e.code&&("x"===n.axis?n.axis="y":"y"===n.axis&&(n.axis="x"))}function d(){const t=document.getElementById("current-player-board"),n=document.getElementById("current-opponent-board"),s=document.getElementById("turn"),a=document.getElementById("player-energy"),l=[...e.players][0],r=[...e.boards][1],o=[...e.players][1],i=[...e.boards][0],d=document.getElementById("opponent-energy");let m="Hit!";const u=c();if("player"===e.turn){for(let e=0;e<n.children.length;e++)"DIV"===n.children[e].tagName&&n.children[e].classList.add("revoke-events");n.addEventListener("click",(()=>{l.attackCharges-=7,a.textContent=`Energy: ${l.attackCharges}`;const t=l.sniperAttack(r);let c="b"+t[0]+","+t[1];const o=document.getElementById(`${c}`);u.play(),o.classList.add("hit"),o.classList.add("permanently-revoke-events"),!0===e.sunkEventFlag&&(m=`You sunk the ${e.justSunk}!`,e.sunkEventFlag=!1),e.wasHit=!1;for(let e=0;e<n.children.length;e++)"DIV"===n.children[e].tagName&&n.children[e].classList.remove("revoke-events");r.allShipsSunk()&&(e.gameOver=!0,C()),e.selectedAttack="attack","PvP"===e.mode?e.turn="opponent":"PvC"===e.mode&&(e.turn="computer",y()),s.textContent=`${m} It's ${v()}'s Turn!`}),{once:!0})}else if("opponent"===e.turn){for(let e=0;e<t.children.length;e++)"DIV"===t.children[e].tagName&&t.children[e].classList.add("revoke-events");t.addEventListener("click",(()=>{o.attackCharges-=7,d.textContent=`Energy: ${o.attackCharges}`;const n=o.sniperAttack(i);let a="a"+n[0]+","+n[1];const c=document.getElementById(`${a}`);u.play(),c.classList.add("hit"),c.classList.add("permanently-revoke-events"),!0===e.sunkEventFlag&&(m=`You sunk the ${e.justSunk}!`,e.sunkEventFlag=!1),e.wasHit=!1;for(let e=0;e<t.children.length;e++)"DIV"===t.children[e].tagName&&t.children[e].classList.remove("revoke-events");i.allShipsSunk()&&(e.gameOver=!0,C()),e.selectedAttack="attack",e.turn="player";const l=document.getElementById("sniper-attack"),r=document.getElementById("sniper-attack-opponent");l.classList.remove("selected"),r.classList.remove("selected"),s.textContent=`${m} It's ${v()}'s Turn!`}),{once:!0})}}function m(e){const t=u(e),n=document.getElementById("current-opponent-board");for(let s=0;s<e*e;s++){const e=document.createElement("div");e.className="opponent-grid-elements",e.id=`b${t.next().value}`,p(e),n.appendChild(e)}}function*u(e){let t=[0,0];for(;t[0]<=e-1&&t[1]<=e-1;)0===t[0]&&0===t[1]&&(yield t),t[1]++,t[1]===e&&(t[0]++,t[1]=0),yield t}function p(t){t.addEventListener("click",(()=>{let s="";const a=c(),r=l(),o=document.getElementById("turn"),d=document.getElementById("player-energy");if("player"!==e.turn)return void p(t);const m=[...e.players][0],u=[...e.boards][1],g=t.id.slice(1).split(",");if("attack"===e.selectedAttack)m.attack(g,u),m.attackCharges++,d.textContent=`Energy: ${m.attackCharges}`;else if("radar"===e.selectedAttack){m.attackCharges-=4,d.textContent=`Energy: ${m.attackCharges}`;let n=m.radarAttack(g,u);t.textContent=`${n}`,t.classList.add("radar"),e.selectedAttack="attack"}else if("bomb"===e.selectedAttack){m.attackCharges-=5,d.textContent=`Energy: ${m.attackCharges}`;const t=m.bombAttack(g,u);for(let e=0;e<t.length;e++){m.attack(t[e],u);let n="b"+t[e][0]+","+t[e][1];document.getElementById(`${n}`).classList.add("permanently-revoke-events")}e.selectedAttack="attack"}else if("strike"===e.selectedAttack){m.attackCharges-=14,d.textContent=`Energy: ${m.attackCharges}`;const t=m.strikeAttack(g,n.axis,u);for(let e=0;e<t.length;e++){m.attack(t[e],u);let n="b"+t[e][0]+","+t[e][1];document.getElementById(`${n}`).classList.add("permanently-revoke-events")}document.removeEventListener("keyup",i),e.selectedAttack="attack",n.axis="x"}u.allShipsSunk()&&(e.gameOver=!0,C()),!0===e.wasHit?(a.play(),t.classList.add("hit"),s="Its a hit!",!0===e.sunkEventFlag&&(s=`You sunk the ${e.justSunk}!`,e.sunkEventFlag=!1),e.wasHit=!1):(r.play(),s="Miss...",t.classList.add("miss")),"PvP"===e.mode?(e.turn="opponent",h(),o.textContent=`${s} It's ${v()}'s Turn!`):"PvC"===e.mode&&(h(),e.turn="computer",o.textContent=`${s} It's ${v()}'s Turn!`,y())}),{once:!0})}function h(){const e=document.getElementById("radar-attack"),t=document.getElementById("radar-attack-opponent"),n=document.getElementById("strike-attack"),s=document.getElementById("strike-attack-opponent"),a=document.getElementById("sniper-attack"),c=document.getElementById("sniper-attack-opponent"),l=document.getElementById("bomb-attack"),r=document.getElementById("bomb-attack-opponent");t.classList.remove("selected"),e.classList.remove("selected"),n.classList.remove("selected"),s.classList.remove("selected"),l.classList.remove("selected"),r.classList.remove("selected"),a.classList.remove("selected"),c.classList.remove("selected")}async function y(){let t="";const n=document.getElementById("turn");await function(){const e=1500*Math.random();return new Promise((t=>setTimeout(t,e)))}();const s=c(),a=l(),r=[...e.players][1],o=[...e.boards][0];r.cpuAttackPattern(o);let i=[...e.cpuAttacked][0][0]+","+[...e.cpuAttacked][0][1];e.cpuAttacked=[];const d=document.getElementById(`a${i}`);o.allShipsSunk()&&(e.gameOver=!0,C()),!0===e.wasHit?(s.play(),d.classList.remove("reveal"),d.classList.add("hit"),t="Its a hit!",!0===e.sunkEventFlag&&(t=`Computer sunk the ${e.justSunk}!`,e.sunkEventFlag=!1),e.wasHit=!1):(a.play(),t="Miss...",d.classList.add("miss")),e.turn="player",n.textContent=`${t} It's ${v()}'s Turn!`}function g(t){t.addEventListener("click",(()=>{const s=c(),a=l();let r="";const o=document.getElementById("turn"),d=document.getElementById("opponent-energy");if("player"===e.turn)return void g(t);const m=[...e.players][1],u=[...e.boards][0],p=t.id.slice(1).split(",");if("PvP"===e.mode){if("attack"===e.selectedAttack)m.attack(p,u),m.attackCharges++,d.textContent=`Energy: ${m.attackCharges}`;else if("radar"===e.selectedAttack){m.attackCharges-=4,d.textContent=`Energy: ${m.attackCharges}`;let n=m.radarAttack(p,u);t.textContent=`${n}`,t.classList.add("radar"),e.selectedAttack="attack"}else if("bomb"===e.selectedAttack){m.attackCharges-=5,d.textContent=`Energy: ${m.attackCharges}`;const t=m.bombAttack(p,u);for(let e=0;e<t.length;e++){m.attack(t[e],u);let n="a"+t[e][0]+","+t[e][1];document.getElementById(`${n}`).classList.add("permanently-revoke-events")}e.selectedAttack="attack"}else if("strike"===e.selectedAttack){m.attackCharges-=14,d.textContent=`Energy: ${m.attackCharges}`;const t=m.strikeAttack(p,n.axis,u);for(let e=0;e<t.length;e++){m.attack(t[e],u);let n="a"+t[e][0]+","+t[e][1];document.getElementById(`${n}`).classList.add("permanently-revoke-events")}document.removeEventListener("keyup",i),e.selectedAttack="attack",n.axis="x"}!0===e.wasHit?(s.play(),t.classList.add("hit"),r="Its a hit!",!0===e.sunkEventFlag&&(r=`You sunk the ${e.justSunk}!`,e.sunkEventFlag=!1),e.wasHit=!1):(a.play(),t.classList.add("miss"),r="Miss...")}u.allShipsSunk()&&(e.gameOver=!0,C()),e.turn="player";const h=document.getElementById("radar-attack"),y=document.getElementById("radar-attack-opponent"),k=document.getElementById("strike-attack"),E=document.getElementById("strike-attack-opponent"),I=document.getElementById("sniper-attack"),f=document.getElementById("sniper-attack-opponent"),L=document.getElementById("bomb-attack"),B=document.getElementById("bomb-attack-opponent");y.classList.remove("selected"),h.classList.remove("selected"),k.classList.remove("selected"),E.classList.remove("selected"),L.classList.remove("selected"),B.classList.remove("selected"),I.classList.remove("selected"),f.classList.remove("selected"),o.textContent=`${r} It's ${v()}'s Turn!`}),{once:!0})}function v(){const t=[...e.boards][0],n=[...e.boards][1];switch(e.turn){case"player":return""===t.name?"Player 1":t.name;case"opponent":return""===n.name?"Player 2":n.name;case"computer":return"Computer"}}function k(t,n){if("player"===e.turn&&"hit"===n){let e="b"+t[0]+","+t[1];document.getElementById(`${e}`).classList.add("hit")}else if("player"===e.turn&&"miss"===n){let e="b"+t[0]+","+t[1];document.getElementById(`${e}`).classList.add("miss")}if("opponent"===e.turn&&"hit"===n){let e="a"+t[0]+","+t[1];document.getElementById(`${e}`).classList.add("hit")}else if("opponent"===e.turn&&"miss"===n){let e="a"+t[0]+","+t[1];document.getElementById(`${e}`).classList.add("miss")}}function E(t){t.addEventListener("dragover",(e=>{e.preventDefault();let s=t.id;if(s=s.split(","),"x"===n.axis)for(let e=0;e<n.currentShip[n.currentShipIndex].shipObj.length;e++){let t=s[0]+","+(parseInt(s[1])+e);document.getElementById(`${t}`)}})),t.addEventListener("dragleave",(e=>{let s=t.id;if(s=s.split(","),"x"===n.axis)for(let e=0;e<n.currentShip[n.currentShipIndex].shipObj.length;e++){let t=s[0]+","+(parseInt(s[1])+e);document.getElementById(`${t}`)}})),t.addEventListener("drop",(s=>{s.preventDefault();let a=t.id;a=a.split(",");let c=[];if("x"===n.axis&&parseInt(a[1])+n.currentShip[n.currentShipIndex].shipObj.length-1>9||"y"===n.axis&&parseInt(a[0])+n.currentShip[n.currentShipIndex].shipObj.length-1>9)return!1;if("x"===n.axis)for(let e=0;e<n.currentShip[n.currentShipIndex].shipObj.length;e++)c.push([parseInt(a[0]),parseInt(a[1])+e]);if("y"===n.axis)for(let e=0;e<n.currentShip[n.currentShipIndex].shipObj.length;e++)c.push([parseInt(a[0])+e,parseInt(a[1])]);if(!function(t){let s;s="player"===n.currentPlacementBoard?[...e.boards][0]:[...e.boards][1];for(let e=0;e<t.length;e++)for(let n=0;n<s.shipCoordinates.length;n++)for(let a=0;a<s.shipCoordinates[n].location.length;a++)if(t[e][0]===s.shipCoordinates[n].location[a][0]&&t[e][1]===s.shipCoordinates[n].location[a][1])return!1;return!0}(c))return!1;const l=s.dataTransfer.getData("text"),r=document.getElementById(l);var o;s.target.appendChild(r),r.setAttribute("draggable",!1),o=c,"player"===n.currentPlacementBoard?[...e.boards][0].addShip([...n.currentShip][n.currentShipIndex].shipObj,o):"opponent"===n.currentPlacementBoard&&[...e.boards][1].addShip([...n.currentShip][n.currentShipIndex].shipObj,o),f(),I(),n.currentShipIndex<5&&L()}))}function I(){if(n.currentShipIndex++,n.currentShipIndex>=5){const t=document.getElementById("game"),s=document.getElementById("placement-page-body-container");if("PvC"===e.mode)[...e.boards][1].randomAddShips();else if("PvP"===e.mode&&"player"===n.currentPlacementBoard)return function(){f(),n.currentShip=[],n.currentShipIndex=0,n.currentPlacementBoard="opponent";const e=document.getElementById("placement-board");for(;e.firstChild;)e.removeChild(e.lastChild);const t=document.getElementById("unplaced-ship-container");for(;t.firstChild;)t.lastChild.className="",t.removeChild(t.lastChild)}(),B();s.style.display="none",t.style.display="flex",function(t=10){!async function(){const e=await fetch("https://api.giphy.com/v1/gifs/o0eOCNkn7cSD6?api_key=XQjjxBQQYTlh7yBaVu1JXQ6YbH5dno3B&s=cats",{mode:"cors"}),t=await e.json();document.getElementById("gg-img").src=t.data.images.original.url}();const n=document.getElementById("game");document.body.style.backgroundImage="none",async function(){const e=await fetch("https://api.giphy.com/v1/gifs/XPlcxsFs8BIKk?api_key=XQjjxBQQYTlh7yBaVu1JXQ6YbH5dno3B&s=cats",{mode:"cors"}),t=await e.json();document.body.style.backgroundImage=`url(${t.data.images.original.url})`}();const s=document.getElementById("placement-page-body-container");!function(){const t=[...e.boards][0],n=[...e.boards][1],s=document.getElementById("player-name"),a=document.getElementById("player-2-name");""===t.name?s.textContent="Player 1":s.textContent=`${t.name}`,""===n.name?a.textContent="Player 2":a.textContent=`${n.name}`}(),function(e){const t=u(e),n=document.getElementById("current-player-board");for(let s=0;s<e*e;s++){const e=document.createElement("div");e.className="player-grid-elements",e.id=`a${t.next().value}`,g(e),n.appendChild(e)}}(t),"PvP"===e.mode?m(t):"PvC"===e.mode&&(function(){let t="";const n=[...e.boards][0];e.boards;for(let e=0;e<n.shipCoordinates.length;e++)for(let s=0;s<n.shipCoordinates[e].location.length;s++)t=n.shipCoordinates[e].location[s][0]+","+n.shipCoordinates[e].location[s][1],document.getElementById(`a${t}`).classList.add("reveal")}(),m(t)),function(){const t=document.getElementById("radar-attack"),n=document.getElementById("radar-attack-opponent"),s=document.getElementById("strike-attack"),a=document.getElementById("strike-attack-opponent"),c=document.getElementById("sniper-attack"),l=document.getElementById("sniper-attack-opponent"),r=document.getElementById("bomb-attack"),o=document.getElementById("bomb-attack-opponent");n.addEventListener("click",(()=>{"opponent"===e.turn&&([...e.players][1].attackCharges>=4?(e.selectedAttack="radar",n.classList.add("selected"),t.classList.remove("selected"),s.classList.remove("selected"),a.classList.remove("selected"),r.classList.remove("selected"),o.classList.remove("selected"),c.classList.remove("selected"),l.classList.remove("selected")):document.getElementById("turn").textContent="You dont have enough energy!")})),t.addEventListener("click",(()=>{"player"===e.turn&&([...e.players][0].attackCharges>=4?(e.selectedAttack="radar",n.classList.remove("selected"),t.classList.add("selected"),s.classList.remove("selected"),a.classList.remove("selected"),r.classList.remove("selected"),o.classList.remove("selected"),c.classList.remove("selected"),l.classList.remove("selected")):document.getElementById("turn").textContent="You dont have enough energy!")})),c.addEventListener("click",(()=>{"player"===e.turn&&([...e.players][0].attackCharges>=7?(e.selectedAttack="sniper",n.classList.remove("selected"),t.classList.remove("selected"),s.classList.remove("selected"),a.classList.remove("selected"),r.classList.remove("selected"),o.classList.remove("selected"),c.classList.add("selected"),l.classList.remove("selected"),d()):document.getElementById("turn").textContent="You dont have enough energy!")})),l.addEventListener("click",(()=>{"opponent"===e.turn&&([...e.players][1].attackCharges>=7?(e.selectedAttack="sniper",n.classList.remove("selected"),t.classList.remove("selected"),s.classList.remove("selected"),a.classList.remove("selected"),r.classList.remove("selected"),o.classList.remove("selected"),c.classList.remove("selected"),l.classList.add("selected"),d()):document.getElementById("turn").textContent="You dont have enough energy!")})),r.addEventListener("click",(()=>{"player"===e.turn&&([...e.players][0].attackCharges>=5?(e.selectedAttack="bomb",n.classList.remove("selected"),t.classList.remove("selected"),s.classList.remove("selected"),a.classList.remove("selected"),r.classList.add("selected"),o.classList.remove("selected"),c.classList.remove("selected"),l.classList.remove("selected")):document.getElementById("turn").textContent="You dont have enough energy!")})),o.addEventListener("click",(()=>{"opponent"===e.turn&&([...e.players][1].attackCharges>=5?(e.selectedAttack="bomb",n.classList.remove("selected"),t.classList.remove("selected"),s.classList.remove("selected"),a.classList.remove("selected"),r.classList.remove("selected"),o.classList.add("selected"),c.classList.remove("selected"),l.classList.remove("selected")):document.getElementById("turn").textContent="You dont have enough energy!")})),s.addEventListener("click",(()=>{"player"===e.turn&&([...e.players][0].attackCharges>=14?(e.selectedAttack="strike",n.classList.remove("selected"),t.classList.remove("selected"),s.classList.add("selected"),a.classList.remove("selected"),r.classList.remove("selected"),o.classList.remove("selected"),c.classList.remove("selected"),l.classList.remove("selected"),document.addEventListener("keyup",i)):document.getElementById("turn").textContent="You dont have enough energy!")})),a.addEventListener("click",(()=>{"opponent"===e.turn&&([...e.players][1].attackCharges>=14?(e.selectedAttack="strike",n.classList.remove("selected"),t.classList.remove("selected"),s.classList.remove("selected"),a.classList.add("selected"),r.classList.remove("selected"),o.classList.remove("selected"),c.classList.remove("selected"),l.classList.remove("selected"),document.addEventListener("keyup",i)):document.getElementById("turn").textContent="You dont have enough energy!")}))}(),s.style.display="none",n.style.display="flex",document.getElementById("turn").textContent=`${v()} start your offensive!`}()}}function f(){n.axis="x",document.getElementById("unplaced-ship-container").style.height="fit-content"}function L(){const e=document.createElement("img");e.className="ship-img";const t=document.getElementById("ship-name"),s=document.getElementById("ship-length");document.getElementById("unplaced-ship-container").appendChild(e),function(){let e;n.currentPlacementBoard,e=document.getElementsByClassName("ship-img")[n.currentShipIndex],e.addEventListener("dragstart",(e=>{e.dataTransfer.clearData(),e.dataTransfer.setData("text/plain",e.target.id)}))}(),e.id=`${[...n.currentShip][n.currentShipIndex].shipObj.name}`,e.src=`${[...n.currentShip][n.currentShipIndex].shipSrcImg}`,t.textContent=`Name: ${[...n.currentShip][n.currentShipIndex].shipObj.name}`,s.textContent=`Length: ${[...n.currentShip][n.currentShipIndex].shipObj.length}`,e.setAttribute("draggable",!0)}function B(){document.getElementById("randomize-button").addEventListener("click",b);const t=document.getElementById("placement-board-name");let s=[...e.players][1].name;""===s&&(s="Player 2"),t.textContent=`${s}'s board`,document.getElementById("placement-page-body-container").display="flex",function(e=10){const t=u(e),n=document.getElementById("placement-board");for(let s=0;s<e*e;s++){const e=document.createElement("div");e.id=`${t.next().value}`,E(e),n.appendChild(e)}}(),function(){let e=[{shipObj:new r(5,"carrier"),shipSrcImg:"assets/ships/carrier.png"},{shipObj:new r(4,"battleship"),shipSrcImg:"assets/ships/battleship.png"},{shipObj:new r(2,"destroyer"),shipSrcImg:"assets/ships/gamsi.png"},{shipObj:new r(3,"cruiser"),shipSrcImg:"assets/ships/frigate.png"},{shipObj:new r(3,"submarine"),shipSrcImg:"assets/ships/submarine.png"}];n.currentShip=e}(),"player"===n.currentPlacementBoard&&(s=[...e.players][0].name,""===s&&(s="Player 1"),t.textContent=`${s}'s board`,L(),function(){const e=document.getElementById("unplaced-ship-container"),t=6*[...n.currentShip][n.currentShipIndex].shipObj.length;document.getElementById("change-orientation").addEventListener("click",(()=>{let s=document.getElementsByClassName("ship-img");"x"===n.axis?(n.axis="y",s[n.currentShipIndex].classList.add("y"),e.style.height=`${t}vh`):(n.axis="x",s[n.currentShipIndex].classList.remove("y"),e.style.height="fit-content")}))}())}function b(){"player"===n.currentPlacementBoard?(document.getElementById("randomize-button").removeEventListener("click",b),[...e.boards][0].randomAddShips(),n.currentShipIndex=5,I(),"PvP"===e.mode&&L()):"opponent"===n.currentPlacementBoard&&([...e.boards][1].randomAddShips(),n.currentShipIndex=5,I())}function x(){B()}function C(){const t=document.getElementById("current-opponent-board"),n=document.getElementById("current-player-board");for(let e=0;e<t.children.length;e++)"DIV"===t.children[e].tagName&&t.children[e].classList.add("revoke-events");for(let e=0;e<n.children.length;e++)"DIV"===n.children[e].tagName&&n.children[e].classList.add("revoke-events");!function(){const t=document.getElementById("current-opponent-board");document.getElementById("current-player-board").classList.add("game-over"),t.classList.add("game-over");const n=document.getElementById("game-over-modal"),s=document.getElementById("winner-name"),a=document.getElementById("num-remaining"),c=document.getElementsByClassName("replay-btn")[0];let l,r=0;[...e.boards][0].allShipsSunk()?(l=[...e.players][1].name,""===[...e.players][1].name&&(l="Player 2"),r=5-[...e.boards][1].sunkShips.length):(l=[...e.players][0].name,""===[...e.players][0].name&&(l="Player 2"),r=5-[...e.boards][0].sunkShips.length),s.textContent=`${l} Won!`,a.textContent=`${l} had ${r} left!`,n.style.display="flex",c.addEventListener("click",(()=>{location.reload()}))}()}function S(){s.currentlyPlaying=A(),s.currentlyPlaying.play();const t=document.getElementById("menu");t.style.display="flex";const c=document.getElementById("pvc"),l=document.getElementById("multiplayer"),r=document.getElementById("options"),i=document.getElementById("single-player-name"),d=document.getElementById("multiplayer-name"),m=document.getElementById("return-to-menu");c.addEventListener("click",(()=>{e.mode="PvC",i.style.display="flex",d.style.display="none"})),l.addEventListener("click",(()=>{e.mode="PvP",i.style.display="none",d.style.display="flex"})),r.addEventListener("click",(()=>{const e=document.getElementById("options-menu"),n=document.getElementById("credits"),a=document.getElementById("credits-scroll"),c=document.getElementById("music"),l=document.getElementById("sfx-modal");t.style.display="none",e.style.display="flex",c.addEventListener("click",(()=>{l.style.display="flex",function(){document.getElementById("music"),document.getElementById("sfx-modal");const e=document.getElementById("high-volume"),t=document.getElementById("medium-volume"),n=document.getElementById("low-volume"),a=document.getElementById("we-are"),c=document.getElementById("cant-escape");e.addEventListener("click",(()=>{e.classList.add("selected"),t.classList.remove("selected"),n.classList.remove("selected"),s.volume=1,s.currentlyPlaying.volume=s.volume})),t.addEventListener("click",(()=>{e.classList.remove("selected"),t.classList.add("selected"),n.classList.remove("selected"),s.volume=.66,s.currentlyPlaying.volume=s.volume})),n.addEventListener("click",(()=>{e.classList.remove("selected"),t.classList.remove("selected"),n.classList.add("selected"),s.volume=.33,s.currentlyPlaying.volume=s.volume})),a.addEventListener("click",(()=>{a.classList.add("selected"),c.classList.remove("selected"),s.song="assets/sfx/we-are-8-bit.mp3",s.currentlyPlaying.pause(),s.currentlyPlaying={},s.currentlyPlaying=A(),s.currentlyPlaying.volume=s.volume,s.currentlyPlaying.play()})),c.addEventListener("click",(()=>{c.classList.add("selected"),a.classList.remove("selected"),s.song="assets/sfx/cant-escape-fight-8-bit.mp3",s.currentlyPlaying.pause(),s.currentlyPlaying={},s.currentlyPlaying=A(),s.currentlyPlaying.volume=s.volume,s.currentlyPlaying.play()}))}(),c.style.display="none",n.style.display="none"})),n.addEventListener("click",(()=>{a.style.display="flex"})),m.addEventListener("click",(()=>{$(),l.style.display="none",c.style.display="flex",n.style.display="flex"})),window.addEventListener("keypress",(function(e){"Enter"===e.key&&($(),l.style.display="none",c.style.display="flex",n.style.display="flex")}))}));const u=document.getElementById("instructions-menu");document.getElementById("instructions-menu-container"),u.addEventListener("click",(()=>{!function(){n.returnState="menu";const e=document.getElementById("menu"),t=document.getElementById("return-button");e.style.display="none",function(){const e=document.getElementById("src-code-logo"),t=(document.getElementById("specials-wrapper-container"),document.getElementsByClassName("instruction-header"));for(let n=0;n<t.length;n++)t[n].addEventListener("click",(()=>{e.remove()}))}(),document.getElementById("instructions-menu-container").style.display="flex",t.addEventListener("click",(()=>{!function(){const e=document.getElementById("menu"),t=document.getElementById("instructions-menu-container"),s=document.getElementById("game");"menu"===n.returnState?(e.style.display="flex",t.style.display="none"):"game"===n.returnState&&(t.style.display="none",s.style.display="flex")}()}))}()})),function(){const t=document.getElementById("new-game-btn-solo"),n=document.getElementById("new-game-btn-multiplayer"),s=(document.getElementById("single-player-name"),document.getElementById("multiplayer-name"),document.getElementById("menu")),c=document.getElementById("placement-page-body-container"),l=document.getElementById("single-player-input"),r=document.getElementById("player1-input"),i=document.getElementById("player2-input");t.addEventListener("click",(()=>{let t=new a(l.value),n=new a("Computer");e.players.push(t),e.players.push(n);const r=new o(l.value),i=new o("Computer");e.boards.push(r),e.boards.push(i),c.style.display="flex",s.style.display="none",x()})),n.addEventListener("click",(()=>{let t=new a(r.value),n=new a(i.value);e.players.push(t),e.players.push(n);const l=new o(r.value),d=new o(i.value);e.boards.push(l),e.boards.push(d),c.style.display="flex",s.style.display="none",x()}))}()}function A(){return"assets/sfx/we-are-8-bit.mp3"===s.song?function(){const e=new Audio("assets/sfx/we-are-8-bit.mp3");return e.loop=!0,e}():"assets/sfx/cant-escape-fight-8-bit.mp3"===s.song?function(){const e=new Audio("assets/sfx/cant-escape-fight-8-bit.mp3");return e.loop=!0,e}():void 0}function $(){const e=document.getElementById("options-menu"),t=document.getElementById("menu");document.getElementById("credits-scroll").style.display="none",e.style.display="none",t.style.display="flex"}!function(){const e=document.getElementById("play"),t=document.getElementById("play-card");e.addEventListener("click",(()=>{t.style.display="none",S()}))}()})();